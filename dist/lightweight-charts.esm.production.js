/*!
 * @license
 * TradingView Lightweight Charts v3.4.0-dev+202106181406
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
import{bindToDevicePixelRatio as t}from"fancy-canvas/coordinate-space";var i,n;function h(t,i){var n,h=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(h)}function s(t,i,n,h){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(n,i+s),t.lineTo(h,i+s),t.stroke()}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.WithGaps=2]="WithGaps"}(i||(i={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(n||(n={}));var r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)};function e(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var i,n=1,h=arguments.length;n<h;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t}).apply(this,arguments)};function a(t,i){for(var n=0,h=i.length,s=t.length;n<h;n++,s++)t[s]=i[n];return t}function o(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function l(t){if(void 0===t)throw new Error("Value is undefined");return t}function f(t){if(null===t)throw new Error("Value is null");return t}function c(t){return f(l(t))}function v(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var h=0,s=i;h<s.length;h++){var r=s[h];for(var e in r)void 0!==r[e]&&("object"!=typeof r[e]||void 0===t[e]?t[e]=r[e]:v(t[e],r[e]))}return t}function _(t){return"number"==typeof t&&isFinite(t)}function d(t){return"number"==typeof t&&t%1==0}function w(t){return"string"==typeof t}function M(t){return"boolean"==typeof t}function b(t){var i,n,h,s=t;if(!s||"object"!=typeof s)return s;for(n in i=Array.isArray(s)?[]:{},s)s.hasOwnProperty(n)&&(h=s[n],i[n]=h&&"object"==typeof h?b(h):h);return i}function m(t){return null!==t}function g(t){return null===t?void 0:t}var p=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,n,h){this.t.forEach((function(s){t.save(),s.h(t,i,n,h),t.restore()}))},t}(),y=function(){function t(){}return t.prototype.h=function(t,i,n,h){t.save(),t.scale(i,i),this.u(t,n,h),t.restore()},t.prototype.o=function(t,i,n,h){t.save(),t.scale(i,i),this.l(t,n,h),t.restore()},t.prototype.l=function(t,i,n){},t}(),k=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return e(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&null!==this.v.M){var i=this.v.M,n=this.v,h=function(h){t.beginPath();for(var s=i.to-1;s>=i.from;--s){var r=n.m[s];t.moveTo(r.g,r.p),t.arc(r.g,r.p,h,0,2*Math.PI)}t.fill()};t.fillStyle=n.k,h(n.N+2),t.fillStyle=n.S,h(n.N)}},i}(y);var x={from:0,to:1},N=function(){function t(t,i){this.C=new p,this.D=[],this.T=[],this.B=!0,this.L=t,this.A=i,this.C.i(this.D)}return t.prototype.V=function(t){var i=this,n=this.L.O();n.length!==this.D.length&&(this.T=n.map((function(){return{m:[{g:0,p:0,P:0,F:0}],S:"",k:i.L.I().layout.backgroundColor,N:0,M:null}})),this.D=this.T.map((function(t){var i=new k;return i._(t),i})),this.C.i(this.D)),this.B=!0},t.prototype.W=function(t,i,n){return this.B&&(this.U(),this.B=!1),this.C},t.prototype.U=function(){var t=this,i=this.L.O(),n=this.A.R(),h=this.L.j();i.forEach((function(i,s){var r=t.T[s],e=i.q(n);if(null!==e&&i.H()){var u=f(i.Y());r.S=e.K,r.k=e.$,r.N=e.N,r.m[0].F=e.F,r.m[0].p=i.Z().X(e.F,u.J),r.m[0].P=n,r.m[0].g=h.G(n),r.M=x}else r.M=null}))},t}(),S=function(){function t(t){this.tt=t}return t.prototype.h=function(t,i,n,r){if(null!==this.tt){var e=this.tt.it.H,u=this.tt.nt.H;if(e||u){t.save();var a=Math.round(this.tt.g*i),o=Math.round(this.tt.p*i),l=Math.ceil(this.tt.ht*i),f=Math.ceil(this.tt.st*i);t.lineCap="butt",e&&a>=0&&(t.lineWidth=Math.floor(this.tt.it.rt*i),t.strokeStyle=this.tt.it.et,t.fillStyle=this.tt.it.et,h(t,this.tt.it.ut),function(t,i,n,h){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i+s,n),t.lineTo(i+s,h),t.stroke()}(t,a,0,f)),u&&o>=0&&(t.lineWidth=Math.floor(this.tt.nt.rt*i),t.strokeStyle=this.tt.nt.et,t.fillStyle=this.tt.nt.et,h(t,this.tt.nt.ut),s(t,o,0,l)),t.restore()}}},t}(),C=function(){function t(t){this.B=!0,this.at={it:{rt:1,ut:0,et:"",H:!1},nt:{rt:1,ut:0,et:"",H:!1},ht:0,st:0,g:0,p:0},this.ot=new S(this.at),this.lt=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.B&&(this.U(),this.B=!1),this.ot},t.prototype.U=function(){var t=this.lt.H(),i=f(this.lt.ft()),n=i.ct().I().crosshair,h=this.at;h.nt.H=t&&this.lt.vt(i),h.it.H=t&&this.lt._t(),h.nt.rt=n.horzLine.width,h.nt.ut=n.horzLine.style,h.nt.et=n.horzLine.color,h.it.rt=n.vertLine.width,h.it.ut=n.vertLine.style,h.it.et=n.vertLine.color,h.ht=i.dt(),h.st=i.wt(),h.g=this.lt.Mt(),h.p=this.lt.bt()},t}(),D={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function T(t){return t<0?0:t>255?255:Math.round(t)||0}var B=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,E=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,L=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,A=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function V(t){var i,n=function(t){var i;if((t=t.toLowerCase())in D&&(t=D[t]),i=A.exec(t)||L.exec(t))return[T(parseInt(i[1],10)),T(parseInt(i[2],10)),T(parseInt(i[3],10))];if(i=E.exec(t))return[T(parseInt(i[1],16)),T(parseInt(i[2],16)),T(parseInt(i[3],16))];if(i=B.exec(t))return[T(17*parseInt(i[1],16)),T(17*parseInt(i[2],16)),T(17*parseInt(i[3],16))];throw new Error("Cannot parse color: "+t)}(t);return{gt:"rgb("+n[0]+", "+n[1]+", "+n[2]+")",yt:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}function z(t,i,n,h,s,r){t.fillRect(i+r,n,h-2*r,r),t.fillRect(i+r,n+s-r,h-2*r,r),t.fillRect(i,n,r,s),t.fillRect(i+h-r,n,r,s)}function O(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function P(t,i,n,h,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,h,s),t.restore()}var F,I=function(){function t(t,i){this._(t,i)}return t.prototype._=function(t,i){this.tt=t,this.kt=i},t.prototype.h=function(t,i,n,h,s,r){if(this.tt.H){t.font=i.xt;var e=this.tt.Nt||!this.tt.St?i.Ct:0,u=i.Dt,a=i.Tt,o=i.Bt,l=i.Et,f=i.Lt,c=this.tt.At,v=Math.ceil(n.Vt(t,c)),_=i.zt,d=i.Ot+a+o,w=Math.ceil(.5*d),M=u+v+l+f+e,b=this.kt.Pt;this.kt.Ft&&(b=this.kt.Ft);var m,g,p=(b=Math.round(b))-w,y=p+d,k="right"===s,x=k?h:0,N=Math.ceil(h*r),S=x;if(t.fillStyle=this.kt.gt,t.lineWidth=1,t.lineCap="butt",c){k?(m=x-e,g=(S=x-M)+f):(S=x+M,m=x+e,g=x+u+e+l);var C=Math.max(1,Math.floor(r)),D=Math.max(1,Math.floor(u*r)),T=k?N:0,B=Math.round(p*r),E=Math.round(S*r),L=Math.round(b*r)-Math.floor(.5*r),A=L+C+(L-B),V=Math.round(m*r);t.save(),t.beginPath(),t.moveTo(T,B),t.lineTo(E,B),t.lineTo(E,A),t.lineTo(T,A),t.fill(),t.fillStyle=this.tt.$,t.fillRect(k?N-D:0,B,D,A-B),this.tt.Nt&&(t.fillStyle=this.kt.et,t.fillRect(T,L,V-T,C)),t.textAlign="left",t.fillStyle=this.kt.et,O(t,r,(function(){t.fillText(c,g,y-o-_)})),t.restore()}}},t.prototype.wt=function(t,i){return this.tt.H?t.Ot+t.Tt+t.Bt:0},t}(),W=function(){function t(t){this.It={Pt:0,et:"#FFF",gt:"#000"},this.Wt={At:"",H:!1,Nt:!0,St:!1,$:""},this.Ut={At:"",H:!1,Nt:!1,St:!0,$:""},this.B=!0,this.Rt=new(t||I)(this.Wt,this.It),this.jt=new(t||I)(this.Ut,this.It)}return t.prototype.At=function(){return this.Wt.At},t.prototype.Pt=function(){return this.qt(),this.It.Pt},t.prototype.V=function(){this.B=!0},t.prototype.wt=function(t,i){return void 0===i&&(i=!1),Math.max(this.Rt.wt(t,i),this.jt.wt(t,i))},t.prototype.Ht=function(){return this.It.Ft||0},t.prototype.Yt=function(t){this.It.Ft=t},t.prototype.Kt=function(){return this.qt(),this.Wt.H||this.Ut.H},t.prototype.$t=function(){return this.qt(),this.Wt.H},t.prototype.W=function(t){return this.qt(),this.Wt.Nt=this.Wt.Nt&&t.I().drawTicks,this.Ut.Nt=this.Ut.Nt&&t.I().drawTicks,this.Rt._(this.Wt,this.It),this.jt._(this.Ut,this.It),this.Rt},t.prototype.Xt=function(){return this.qt(),this.Rt._(this.Wt,this.It),this.jt._(this.Ut,this.It),this.jt},t.prototype.qt=function(){this.B&&(this.Wt.Nt=!0,this.Ut.Nt=!1,this.Zt(this.Wt,this.Ut,this.It))},t}(),U=function(t){function i(i,n,h){var s=t.call(this)||this;return s.lt=i,s.Jt=n,s.Gt=h,s}return e(i,t),i.prototype.Zt=function(t,i,n){t.H=!1;var h=this.lt.I().horzLine;if(h.labelVisible){var s=this.Jt.Y();if(this.lt.H()&&!this.Jt.Qt()&&null!==s){var r=V(h.labelBackgroundColor);n.gt=r.gt,n.et=r.yt;var e=this.Gt(this.Jt);n.Pt=e.Pt,t.At=this.Jt.ti(e.F,s),t.H=!0}}},i}(W),R=/[1-9]/g,j=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n){var h=this;if(null!==this.tt&&!1!==this.tt.H&&0!==this.tt.At.length){t.font=i.xt;var s=Math.round(i.ii.Vt(t,this.tt.At,R));if(!(s<=0)){t.save();var r=i.ni,e=s+2*r,u=e/2,a=this.tt.dt,o=this.tt.Pt,l=Math.floor(o-u)+.5;l<0?(o+=Math.abs(0-l),l=Math.floor(o-u)+.5):l+e>a&&(o-=Math.abs(a-(l+e)),l=Math.floor(o-u)+.5);var c=l+e,v=0+i.Dt+i.Tt+i.Ot+i.Bt;t.fillStyle=this.tt.gt;var _=Math.round(l*n),d=Math.round(0*n),w=Math.round(c*n),M=Math.round(v*n);t.fillRect(_,d,w-_,M-d);var b=Math.round(this.tt.Pt*n),m=d,g=Math.round((m+i.Dt+i.Ct)*n);t.fillStyle=this.tt.et;var p=Math.max(1,Math.floor(n)),y=Math.floor(.5*n);t.fillRect(b-y,m,p,g-m);var k=v-i.zt-i.Bt;t.textAlign="left",t.fillStyle=this.tt.et,O(t,n,(function(){t.fillText(f(h.tt).At,l+r,k)})),t.restore()}}},t}(),q=function(){function t(t,i,n){this.B=!0,this.ot=new j,this.at={H:!1,gt:"#4c525e",et:"white",At:"",dt:0,Pt:NaN},this.A=t,this.hi=i,this.Gt=n}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(){return this.B&&(this.U(),this.B=!1),this.ot._(this.at),this.ot},t.prototype.U=function(){var t=this.at;t.H=!1;var i=this.A.I().vertLine;if(i.labelVisible){var n=this.hi.j();if(!n.Qt()){var h=n.si(this.A.R());t.dt=n.dt();var s=this.Gt();if(s.P){t.Pt=s.Pt,t.At=n.ri(f(h)),t.H=!0;var r=V(i.labelBackgroundColor);t.gt=r.gt,t.et=r.yt}}}},t}(),H=function(){function t(){this.ei=null,this.ui=0}return t.prototype.ai=function(){return this.ui},t.prototype.oi=function(t){this.ui=t},t.prototype.Z=function(){return this.ei},t.prototype.li=function(t){this.ei=t},t.prototype.fi=function(t,i){return[]},t.prototype.ci=function(t){return[]},t.prototype.vi=function(){return[]},t.prototype.H=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(F||(F={}));var Y=function(t){function i(i,n){var h=t.call(this)||this;h._i=null,h.di=NaN,h.wi=0,h.Mi=!0,h.bi=new Map,h.mi=!1,h.gi=NaN,h.pi=NaN,h.yi=NaN,h.ki=NaN,h.hi=i,h.xi=n,h.Ni=new N(i,h);var s,r;h.Si=(s=function(){return h.di},r=function(){return h.pi},function(t){var i=r(),n=s();if(t===f(h._i).Ci())return{F:n,Pt:i};var e=f(t.Y());return{F:t.Di(i,e),Pt:i}});var e=function(t,i){return function(){return{P:h.hi.j().si(t()),Pt:i()}}}((function(){return h.wi}),(function(){return h.Mt()}));return h.Ti=new q(h,i,e),h.Bi=new C(h),h}return e(i,t),i.prototype.I=function(){return this.xi},i.prototype.Ei=function(t,i){this.yi=t,this.ki=i},i.prototype.Li=function(){this.yi=NaN,this.ki=NaN},i.prototype.Ai=function(){return this.yi},i.prototype.Vi=function(){return this.ki},i.prototype.zi=function(t,i,n){this.mi||(this.mi=!0),this.Mi=!0,this.Oi(t,i,n)},i.prototype.R=function(){return this.wi},i.prototype.Mt=function(){return this.gi},i.prototype.bt=function(){return this.pi},i.prototype.H=function(){return this.Mi},i.prototype.Pi=function(){this.Mi=!1,this.Fi(),this.di=NaN,this.gi=NaN,this.pi=NaN,this._i=null,this.Li()},i.prototype.ci=function(t){return null!==this._i?[this.Bi,this.Ni]:[]},i.prototype.vt=function(t){return t===this._i&&this.xi.horzLine.visible},i.prototype._t=function(){return this.xi.vertLine.visible},i.prototype.fi=function(t,i){this.Mi&&this._i===t||this.bi.clear();var n=[];return this._i===t&&n.push(this.Ii(this.bi,i,this.Si)),n},i.prototype.vi=function(){return this.Mi?[this.Ti]:[]},i.prototype.ft=function(){return this._i},i.prototype.Wi=function(){this.Bi.V(),this.bi.forEach((function(t){return t.V()})),this.Ti.V(),this.Ni.V()},i.prototype.Ui=function(t){return t&&!t.Ci().Qt()?t.Ci():null},i.prototype.Oi=function(t,i,n){this.Ri(t,i,n)&&this.Wi()},i.prototype.Ri=function(t,i,n){var h=this.gi,s=this.pi,r=this.di,e=this.wi,u=this._i,a=this.Ui(n);this.wi=t,this.gi=isNaN(t)?NaN:this.hi.j().G(t),this._i=n;var o=null!==a?a.Y():null;return null!==a&&null!==o?(this.di=i,this.pi=a.X(i,o)):(this.di=NaN,this.pi=NaN),h!==this.gi||s!==this.pi||e!==this.wi||r!==this.di||u!==this._i},i.prototype.Fi=function(){var t=this.hi.O().map((function(t){return t.qi().ji()})).filter(m),i=0===t.length?null:Math.max.apply(Math,t);this.wi=null!==i?i:NaN},i.prototype.Ii=function(t,i,n){var h=t.get(i);return void 0===h&&(h=new U(this,i,n),t.set(i,h)),h},i}(H),K=".";function $(t,i){if(!_(t))return"n/a";if(!d(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}var X=function(){function t(t,i){if(i||(i=1),_(t)&&d(t)||(t=100),t<0)throw new TypeError("invalid base");this.Jt=t,this.Hi=i,this.Yi()}return t.prototype.format=function(t){var i=t<0?"−":"";return t=Math.abs(t),i+this.Ki(t)},t.prototype.Yi=function(){if(this._fractionalLength=0,this.Jt>0&&this.Hi>0)for(var t=this.Jt;t>1;)t/=10,this._fractionalLength++},t.prototype.Ki=function(t){var i=this.Jt/this.Hi,n=Math.floor(t),h="",s=void 0!==this._fractionalLength?this._fractionalLength:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this._fractionalLength);r>=i&&(r-=i,n+=1),h=K+$(+r.toFixed(this._fractionalLength)*this.Hi,s)}else n=Math.round(n*i)/i,s>0&&(h=K+$(0,s));return n.toFixed(0)+h},t}(),Z=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return e(i,t),i.prototype.format=function(i){return t.prototype.format.call(this,i)+"%"},i}(X),J=function(){function t(){this.$i=[]}return t.prototype.Xi=function(t,i,n){var h={Zi:t,Ji:i,Gi:!0===n};this.$i.push(h)},t.prototype.Qi=function(t){var i=this.$i.findIndex((function(i){return t===i.Zi}));i>-1&&this.$i.splice(i,1)},t.prototype.tn=function(t){this.$i=this.$i.filter((function(i){return i.Ji===t}))},t.prototype.nn=function(t,i){var n=a([],this.$i);this.$i=this.$i.filter((function(t){return!t.Gi})),n.forEach((function(n){return n.Zi(t,i)}))},t.prototype.hn=function(){return this.$i.length>0},t.prototype.sn=function(){this.$i=[]},t}(),G=function(){function t(t,i){this.rn=t,this.en=i}return t.prototype.un=function(t){return null!==t&&(this.rn===t.rn&&this.en===t.en)},t.prototype.an=function(){return new t(this.rn,this.en)},t.prototype.on=function(){return this.rn},t.prototype.ln=function(){return this.en},t.prototype.fn=function(){return this.en-this.rn},t.prototype.Qt=function(){return this.en===this.rn||Number.isNaN(this.en)||Number.isNaN(this.rn)},t.prototype.cn=function(i){return null===i?this:new t(Math.min(this.on(),i.on()),Math.max(this.ln(),i.ln()))},t.prototype.vn=function(t){if(_(t)&&0!==this.en-this.rn){var i=.5*(this.en+this.rn),n=this.en-i,h=this.rn-i;n*=t,h*=t,this.en=i+n,this.rn=i+h}},t.prototype._n=function(t){_(t)&&(this.en+=t,this.rn+=t)},t.prototype.dn=function(){return{minValue:this.rn,maxValue:this.en}},t.wn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function Q(t,i,n){return Math.min(Math.max(t,i),n)}function tt(t,i,n){return i-t<=n}function it(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function nt(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function ht(t){var i=Math.ceil(t);return i%2==0?i-1:i}function st(t,i){var n=100*(t-i)/i;return i<0?-n:n}function rt(t,i){var n=st(t.on(),i),h=st(t.ln(),i);return new G(n,h)}function et(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function ut(t,i){var n=et(t.on(),i),h=et(t.ln(),i);return new G(n,h)}function at(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=it(i+1e-4)+4;return t<0?-n:n}function ot(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=Math.pow(10,i-4)-1e-4;return t<0?-n:n}function lt(t){if(null===t)return null;var i=at(t.on()),n=at(t.ln());return new G(i,n)}var ft,ct=function(){function t(t,i){if(this.Mn=t,this.bn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Mn))this.mn=[2,2.5,2];else{this.mn=[];for(var n=this.Mn;1!==n;){if(n%2==0)this.mn.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.mn.push(2,2.5),n/=5}if(this.mn.length>100)throw new Error("something wrong with base")}}}return t.prototype.gn=function(t,i,n){for(var h,s,r,e=0===this.Mn?0:1/this.Mn,u=1e-9,a=Math.pow(10,Math.max(0,Math.ceil(it(t-i)))),o=0,l=this.bn[0];;){var f=tt(a,e,u)&&a>e+u,c=tt(a,n*l,u),v=tt(a,1,u);if(!(f&&c&&v))break;a/=l,l=this.bn[++o%this.bn.length]}if(a<=e+u&&(a=e),a=Math.max(1,a),this.mn.length>0&&(h=a,s=1,r=u,Math.abs(h-s)<r))for(o=0,l=this.mn[0];tt(a,n*l,u)&&a>e+u;)a/=l,l=this.mn[++o%this.mn.length];return a},t}(),vt=function(){function t(t,i,n,h){this.pn=[],this.Jt=t,this.Mn=i,this.yn=n,this.kn=h}return t.prototype.gn=function(t,i){if(t<i)throw new Error("high < low");var n=this.Jt.wt(),h=(t-i)*this.xn()/n,s=new ct(this.Mn,[2,2.5,2]),r=new ct(this.Mn,[2,2,2.5]),e=new ct(this.Mn,[2.5,2,2]),u=[];return u.push(s.gn(t,i,h),r.gn(t,i,h),e.gn(t,i,h)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(u)},t.prototype.Nn=function(){var t=this.Jt,i=t.Y();if(null!==i){var n=t.wt(),h=this.yn(n-1,i),s=this.yn(0,i),r=this.Jt.I().entireTextOnly?this.Sn()/2:0,e=r,u=n-1-r,a=Math.max(h,s),o=Math.min(h,s);if(a!==o){for(var l=this.gn(a,o),f=a%l,c=a>=o?1:-1,v=null,_=0,d=a-(f+=f<0?l:0);d>o;d-=l){var w=this.kn(d,i,!0);null!==v&&Math.abs(w-v)<this.xn()||(w<e||w>u||(_<this.pn.length?(this.pn[_].Cn=w,this.pn[_].Dn=t.Tn(d)):this.pn.push({Cn:w,Dn:t.Tn(d)}),_++,v=w,t.Bn()&&(l=this.gn(d*c,o))))}this.pn.length=_}else this.pn=[]}else this.pn=[]},t.prototype.En=function(){return this.pn},t.prototype.Sn=function(){return this.Jt.Ot()},t.prototype.xn=function(){return Math.ceil(2.5*this.Sn())},t}();function _t(t){return t.slice().sort((function(t,i){return f(t.ai())-f(i.ai())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(ft||(ft={}));var dt,wt=new Z,Mt=new X(100,1),bt=function(){function t(t,i,n,h){this.Ln=0,this.An=null,this.Vn=null,this.zn=null,this.On={Pn:!1,Fn:null},this.In=0,this.Wn=0,this.Un=new J,this.Rn=new J,this.jn=[],this.qn=null,this.Hn=null,this.Yn=null,this.Kn=null,this.$n=Mt,this.Xn=t,this.xi=i,this.Zn=n,this.Jn=h,this.Gn=new vt(this,100,this.Qn.bind(this),this.th.bind(this))}return t.prototype.ih=function(){return this.Xn},t.prototype.I=function(){return this.xi},t.prototype.nh=function(t){if(v(this.xi,t),this.hh(),void 0!==t.mode&&this.sh({rh:t.mode}),void 0!==t.scaleMargins){var i=l(t.scaleMargins.top),n=l(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.eh(),this.Hn=null}},t.prototype.uh=function(){return this.xi.autoScale},t.prototype.Bn=function(){return 1===this.xi.mode},t.prototype.ah=function(){return 2===this.xi.mode},t.prototype.oh=function(){return 3===this.xi.mode},t.prototype.rh=function(){return{lh:this.xi.autoScale,fh:this.xi.invertScale,rh:this.xi.mode}},t.prototype.sh=function(t){var i=this.rh(),n=null;void 0!==t.lh&&(this.xi.autoScale=t.lh),void 0!==t.rh&&(this.xi.mode=t.rh,2!==t.rh&&3!==t.rh||(this.xi.autoScale=!0),this.On.Pn=!1),1===i.rh&&t.rh!==i.rh&&(!function(t){if(null===t)return!1;var i=ot(t.on()),n=ot(t.ln());return isFinite(i)&&isFinite(n)}(this.Vn)?this.xi.autoScale=!0:null!==(n=function(t){if(null===t)return null;var i=ot(t.on()),n=ot(t.ln());return new G(i,n)}(this.Vn))&&this._h(n)),1===t.rh&&t.rh!==i.rh&&null!==(n=lt(this.Vn))&&this._h(n);var h=i.rh!==this.xi.mode;h&&(2===i.rh||this.ah())&&this.hh(),h&&(3===i.rh||this.oh())&&this.hh(),void 0!==t.fh&&i.fh!==t.fh&&(this.xi.invertScale=t.fh,this.dh()),this.Rn.nn(i,this.rh())},t.prototype.wh=function(){return this.Rn},t.prototype.Ot=function(){return this.Zn.fontSize},t.prototype.wt=function(){return this.Ln},t.prototype.Mh=function(t){this.Ln!==t&&(this.Ln=t,this.eh(),this.Hn=null)},t.prototype.bh=function(){if(this.An)return this.An;var t=this.wt()-this.mh()-this.gh();return this.An=t,t},t.prototype.ph=function(){return this.yh(),this.Vn},t.prototype._h=function(t,i){var n=this.Vn;(i||null===n&&null!==t||null!==n&&!n.un(t))&&(this.Hn=null,this.Vn=t)},t.prototype.Qt=function(){return this.yh(),0===this.Ln||!this.Vn||this.Vn.Qt()},t.prototype.kh=function(t){return this.fh()?t:this.wt()-1-t},t.prototype.X=function(t,i){return this.ah()?t=st(t,i):this.oh()&&(t=et(t,i)),this.th(t,i)},t.prototype.xh=function(t,i,n){this.yh();for(var h=this.gh(),s=f(this.ph()),r=s.on(),e=s.ln(),u=this.bh()-1,a=this.fh(),o=u/(e-r),l=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Nh(),_=l;_<c;_++){var d=t[_],w=d.F;if(!isNaN(w)){var M=w;null!==v&&(M=v(d.F,i));var b=h+o*(M-r),m=a?b:this.Ln-1-b;d.p=m}}},t.prototype.Sh=function(t,i,n){this.yh();for(var h=this.gh(),s=f(this.ph()),r=s.on(),e=s.ln(),u=this.bh()-1,a=this.fh(),o=u/(e-r),l=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Nh(),_=l;_<c;_++){var d=t[_],w=d.open,M=d.high,b=d.low,m=d.close;null!==v&&(w=v(d.open,i),M=v(d.high,i),b=v(d.low,i),m=v(d.close,i));var g=h+o*(w-r),p=a?g:this.Ln-1-g;d.Ch=p,g=h+o*(M-r),p=a?g:this.Ln-1-g,d.Dh=p,g=h+o*(b-r),p=a?g:this.Ln-1-g,d.Th=p,g=h+o*(m-r),p=a?g:this.Ln-1-g,d.Bh=p}},t.prototype.Di=function(t,i){var n=this.Qn(t,i);return this.Eh(n,i)},t.prototype.Eh=function(t,i){var n=t;return this.ah()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.oh()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Lh=function(){return this.jn},t.prototype.Ah=function(){if(this.qn)return this.qn;for(var t=[],i=0;i<this.jn.length;i++){var n=this.jn[i];null===n.ai()&&n.oi(i+1),t.push(n)}return t=_t(t),this.qn=t,this.qn},t.prototype.Vh=function(t){-1===this.jn.indexOf(t)&&(this.jn.push(t),this.hh(),this.zh())},t.prototype.Oh=function(t){var i=this.jn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.jn.splice(i,1),0===this.jn.length&&(this.sh({lh:!0}),this._h(null)),this.hh(),this.zh()},t.prototype.Y=function(){for(var t=null,i=0,n=this.jn;i<n.length;i++){var h=n[i].Y();null!==h&&null!==h.J&&((null===t||h.Ph<t.Ph)&&(t=h))}return null===t?null:t.J},t.prototype.fh=function(){return this.xi.invertScale},t.prototype.En=function(){return this.Hn||(this.Gn.Nn(),this.Hn=this.Gn.En(),this.Un.nn()),this.Hn},t.prototype.Fh=function(){return this.Un},t.prototype.Ih=function(t){this.ah()||this.oh()||null===this.Yn&&null===this.zn&&(this.Qt()||(this.Yn=this.Ln-t,this.zn=f(this.ph()).an()))},t.prototype.Wh=function(t){if(!this.ah()&&!this.oh()&&null!==this.Yn){this.sh({lh:!1}),(t=this.Ln-t)<0&&(t=0);var i=(this.Yn+.2*(this.Ln-1))/(t+.2*(this.Ln-1)),n=f(this.zn).an();i=Math.max(i,.1),n.vn(i),this._h(n)}},t.prototype.Uh=function(){this.ah()||this.oh()||(this.Yn=null,this.zn=null)},t.prototype.Rh=function(t){this.uh()||null===this.Kn&&null===this.zn&&(this.Qt()||(this.Kn=t,this.zn=f(this.ph()).an()))},t.prototype.jh=function(t){if(!this.uh()&&null!==this.Kn){var i=f(this.ph()).fn()/(this.bh()-1),n=t-this.Kn;this.fh()&&(n*=-1);var h=n*i,s=f(this.zn).an();s._n(h),this._h(s,!0),this.Hn=null}},t.prototype.qh=function(){this.uh()||null!==this.Kn&&(this.Kn=null,this.zn=null)},t.prototype.Hh=function(){return this.$n||this.hh(),this.$n},t.prototype.ti=function(t,i){switch(this.xi.mode){case 2:return this.Hh().format(st(t,i));case 3:return this.Hh().format(et(t,i));default:return this.Yh(t)}},t.prototype.Tn=function(t){switch(this.xi.mode){case 2:case 3:return this.Hh().format(t);default:return this.Yh(t)}},t.prototype.Kh=function(t){return this.Yh(t,f(this.$h()).Hh())},t.prototype.Xh=function(t,i){return t=st(t,i),wt.format(t)},t.prototype.Zh=function(){return this.jn},t.prototype.Jh=function(t){this.On={Fn:t,Pn:!1}},t.prototype.Wi=function(){this.jn.forEach((function(t){return t.Wi()}))},t.prototype.hh=function(){this.Hn=null;var t=this.$h(),i=100;null!==t&&(i=Math.round(1/t.Gh())),this.$n=Mt,this.ah()?(this.$n=wt,i=100):this.oh()?(this.$n=new X(100,1),i=100):null!==t&&(this.$n=t.Hh()),this.Gn=new vt(this,i,this.Qn.bind(this),this.th.bind(this)),this.Gn.Nn()},t.prototype.zh=function(){this.qn=null},t.prototype.$h=function(){return this.jn[0]||null},t.prototype.mh=function(){return this.fh()?this.xi.scaleMargins.bottom*this.wt()+this.Wn:this.xi.scaleMargins.top*this.wt()+this.In},t.prototype.gh=function(){return this.fh()?this.xi.scaleMargins.top*this.wt()+this.In:this.xi.scaleMargins.bottom*this.wt()+this.Wn},t.prototype.yh=function(){this.On.Pn||(this.On.Pn=!0,this.Qh())},t.prototype.eh=function(){this.An=null},t.prototype.th=function(t,i){if(this.yh(),this.Qt())return 0;t=this.Bn()&&t?at(t):t;var n=f(this.ph()),h=this.gh()+(this.bh()-1)*(t-n.on())/n.fn();return this.kh(h)},t.prototype.Qn=function(t,i){if(this.yh(),this.Qt())return 0;var n=this.kh(t),h=f(this.ph()),s=h.on()+h.fn()*((n-this.gh())/(this.bh()-1));return this.Bn()?ot(s):s},t.prototype.dh=function(){this.Hn=null,this.Gn.Nn()},t.prototype.Qh=function(){var t=this.On.Fn;if(null!==t){for(var i=null,n=0,h=0,s=0,r=this.Zh();s<r.length;s++){var e=r[s];if(e.H()){var u=e.Y();if(null!==u){var a=e.ts(t.ns(),t.hs()),o=a&&a.ph();if(null!==o){switch(this.xi.mode){case 1:o=lt(o);break;case 2:o=rt(o,u.J);break;case 3:o=ut(o,u.J)}if(i=null===i?o:i.cn(f(o)),null!==a){var l=a.ss();null!==l&&(n=Math.max(n,l.above),h=Math.max(n,l.below))}}}}}if(n===this.In&&h===this.Wn||(this.In=n,this.Wn=h,this.Hn=null,this.eh()),null!==i){if(i.on()===i.ln()){var c=this.$h(),v=5*(null===c||this.ah()||this.oh()?1:c.Gh());i=new G(i.on()-v,i.ln()+v)}this._h(i)}else null===this.Vn&&this._h(new G(-.5,.5));this.On.Pn=!0}},t.prototype.Nh=function(){return this.ah()?st:this.oh()?et:this.Bn()?at:null},t.prototype.Yh=function(t,i){return void 0===this.Jn.priceFormatter?(void 0===i&&(i=this.Hh()),i.format(t)):this.Jn.priceFormatter(t)},t}();function mt(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(dt||(dt={}));var gt=function(t){return t.getUTCFullYear()};function pt(t,i,n){return i.replace(/yyyy/g,function(t){return $(gt(t),4)}(t)).replace(/yy/g,function(t){return $(gt(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return $(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return $(function(t){return t.getUTCDate()}(t),2)}(t))}var yt=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.rs=t,this.es=i}return t.prototype.format=function(t){return pt(t,this.rs,this.es)},t}(),kt=function(){function t(t){this.us=t||"%h:%m:%s"}return t.prototype.format=function(t){return this.us.replace("%h",$(t.getUTCHours(),2)).replace("%m",$(t.getUTCMinutes(),2)).replace("%s",$(t.getUTCSeconds(),2))},t}(),xt={os:"yyyy-MM-dd",ls:"%h:%m:%s",fs:" ",cs:"default"},Nt=function(){function t(t){void 0===t&&(t={});var i=u(u({},xt),t);this.vs=new yt(i.os,i.cs),this._s=new kt(i.ls),this.ds=i.fs}return t.prototype.format=function(t){return""+this.vs.format(t)+this.ds+this._s.format(t)},t}();var St=function(){function t(t,i){void 0===i&&(i=50),this.ws=0,this.Ms=1,this.bs=1,this.gs=new Map,this.ps=new Map,this.ys=t,this.ks=i}return t.prototype.xs=function(t){var i=void 0===t.Ns?new Date(1e3*t.Ss).getTime():new Date(Date.UTC(t.Ns.year,t.Ns.month-1,t.Ns.day)).getTime(),n=this.gs.get(i);if(void 0!==n)return n.Cs;if(this.ws===this.ks){var h=this.ps.get(this.bs);this.ps.delete(this.bs),this.gs.delete(l(h)),this.bs++,this.ws--}var s=this.ys(t);return this.gs.set(i,{Cs:s,Ds:this.Ms}),this.ps.set(this.Ms,i),this.ws++,this.Ms++,s},t}(),Ct=function(){function t(t,i){o(t<=i,"right should be >= left"),this.Ts=t,this.Bs=i}return t.prototype.ns=function(){return this.Ts},t.prototype.hs=function(){return this.Bs},t.prototype.Es=function(){return this.Bs-this.Ts+1},t.prototype.Ls=function(t){return this.Ts<=t&&t<=this.Bs},t.prototype.un=function(t){return this.Ts===t.ns()&&this.Bs===t.hs()},t}();function Dt(t,i){return null===t||null===i?t===i:t.un(i)}var Tt,Bt=function(){function t(){this.As=new Map,this.gs=null}return t.prototype.Vs=function(t){var i=this;this.gs=null,this.As.clear(),t.forEach((function(t,n){var h=i.As.get(t.zs);void 0===h&&(h=[],i.As.set(t.zs,h)),h.push({Os:n,P:t.P,Ps:t.zs})}))},t.prototype.Fs=function(t,i){var n=Math.ceil(i/t);return null!==this.gs&&this.gs.Is===n||(this.gs={En:this.Ws(n),Is:n}),this.gs.En},t.prototype.Ws=function(t){for(var i=[],n=0,h=Array.from(this.As.keys()).sort((function(t,i){return i-t}));n<h.length;n++){var s=h[n];if(this.As.get(s)){var r=i;i=[];for(var e=r.length,u=0,a=l(this.As.get(s)),o=a.length,f=1/0,c=-1/0,v=0;v<o;v++){for(var _=a[v],d=_.Os;u<e;){var w=r[u],M=w.Os;if(!(M<d)){f=M;break}u++,i.push(w),c=M,f=1/0}f-d>=t&&d-c>=t&&(i.push(_),c=d)}for(;u<e;u++)i.push(r[u])}}return i},t}(),Et=function(){function t(t){this.Us=t}return t.prototype.Rs=function(){return null===this.Us?null:new Ct(Math.floor(this.Us.ns()),Math.ceil(this.Us.hs()))},t.prototype.js=function(){return this.Us},t.qs=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Tt||(Tt={}));var Lt=function(){function t(t,i,n){this.Hs=0,this.Ys=null,this.Ks=[],this.Kn=null,this.Yn=null,this.$s=new Bt,this.Xs=new Map,this.Zs=Et.qs(),this.Js=!0,this.Gs=new J,this.Qs=new J,this.tr=new J,this.ir=null,this.nr=null,this.hr=[],this.xi=i,this.Jn=n,this.sr=i.rightOffset,this.rr=i.barSpacing,this.hi=t,this.er()}return t.prototype.I=function(){return this.xi},t.prototype.ur=function(t){v(this.Jn,t),this.ar(),this.er()},t.prototype.nh=function(t,i){var n;v(this.xi,t),this.xi.fixLeftEdge&&this.lr(),this.xi.fixRightEdge&&this.cr(),void 0!==t.barSpacing&&this.hi.vr(t.barSpacing),void 0!==t.rightOffset&&this.hi._r(t.rightOffset),void 0!==t.minBarSpacing&&this.hi.vr(null!==(n=t.barSpacing)&&void 0!==n?n:this.rr),this.ar(),this.er(),this.tr.nn()},t.prototype.si=function(t){var i;return(null===(i=this.Ks[t])||void 0===i?void 0:i.P)||null},t.prototype.dr=function(t,i){if(this.Ks.length<1)return null;if(t.Ss>this.Ks[this.Ks.length-1].P.Ss)return i?this.Ks.length-1:null;for(var n=0;n<this.Ks.length;++n){if(t.Ss===this.Ks[n].P.Ss)return n;if(t.Ss<this.Ks[n].P.Ss)return i?n:null}return null},t.prototype.Qt=function(){return 0===this.Hs||0===this.Ks.length},t.prototype.wr=function(){return this.Mr(),this.Zs.Rs()},t.prototype.br=function(){return this.Mr(),this.Zs.js()},t.prototype.mr=function(){var t=this.wr();if(null===t)return null;var i={from:t.ns(),to:t.hs()};return this.gr(i)},t.prototype.gr=function(t){var i=Math.round(t.from),n=Math.round(t.to),h=f(this.pr()),s=f(this.yr());return{from:f(this.si(Math.max(h,i))),to:f(this.si(Math.min(s,n)))}},t.prototype.kr=function(t){return{from:f(this.dr(t.from,!0)),to:f(this.dr(t.to,!0))}},t.prototype.Nr=function(){return this.$s},t.prototype.dt=function(){return this.Hs},t.prototype.Sr=function(t){if(isFinite(t)&&!(t<=0)&&this.Hs!==t){if(this.xi.lockVisibleTimeRangeOnResize&&this.Hs){var i=this.rr*t/this.Hs;this.Cr(i)}if(this.xi.fixLeftEdge){var n=this.wr();if(null!==n)if(n.ns()<=0){var h=this.Hs-t;this.sr-=Math.round(h/this.rr)+1}}this.Hs=t,this.Js=!0,this.Dr(),this.Tr()}},t.prototype.G=function(t){if(this.Qt()||!d(t))return 0;var i=this.Br()+this.sr-t;return this.Hs-(i+.5)*this.rr-1},t.prototype.Er=function(t,i){for(var n=this.Br(),h=void 0===i?0:i.from,s=void 0===i?t.length:i.to,r=h;r<s;r++){var e=t[r].P,u=n+this.sr-e,a=this.Hs-(u+.5)*this.rr-1;t[r].g=a}},t.prototype.Lr=function(t){return Math.ceil(this.Ar(t))},t.prototype._r=function(t){this.Js=!0,this.sr=t,this.Tr(),this.hi.Vr(),this.hi.zr()},t.prototype.Or=function(){return this.rr},t.prototype.vr=function(t){this.Cr(t),this.Tr(),this.hi.Vr(),this.hi.zr()},t.prototype.Pr=function(){return this.sr},t.prototype.En=function(){if(this.Qt())return null;if(null!==this.nr)return this.nr;for(var t=this.rr,i=5*(this.hi.I().layout.fontSize+4),n=Math.round(i/t),h=f(this.wr()),s=Math.max(h.ns(),h.ns()-n),r=Math.max(h.hs(),h.hs()-n),e=0,u=0,a=this.$s.Fs(t,i);u<a.length;u++){var o=a[u];if(s<=o.Os&&o.Os<=r){var l=this.si(o.Os);if(null!==l){if(e<this.hr.length){var c=this.hr[e];c.Cn=this.G(o.Os),c.Dn=this.Fr(l,o.Ps),c.Ps=o.Ps}else this.hr.push({Cn:this.G(o.Os),Dn:this.Fr(l,o.Ps),Ps:o.Ps});e++}}}return this.hr.length=e,this.nr=this.hr,this.hr},t.prototype.Ir=function(){this.Js=!0,this.vr(this.xi.barSpacing),this._r(this.xi.rightOffset)},t.prototype.Wr=function(t){this.Js=!0,this.Ys=t,this.Tr(),this.lr()},t.prototype.Ur=function(t,i){var n=this.Ar(t),h=this.Or(),s=h+i*(h/10);this.vr(s),this.xi.rightBarStaysOnScroll||this._r(this.Pr()+(n-this.Ar(t)))},t.prototype.Ih=function(t){this.Kn&&this.qh(),null===this.Yn&&null===this.ir&&(this.Qt()||(this.Yn=t,this.Rr()))},t.prototype.Wh=function(t){if(null!==this.ir){var i=Q(this.Hs-t,0,this.Hs),n=Q(this.Hs-f(this.Yn),0,this.Hs);0!==i&&0!==n&&this.vr(this.ir.Or*i/n)}},t.prototype.Uh=function(){null!==this.Yn&&(this.Yn=null,this.jr())},t.prototype.Rh=function(t){null===this.Kn&&null===this.ir&&(this.Qt()||(this.Kn=t,this.Rr()))},t.prototype.jh=function(t){if(null!==this.Kn){var i=(this.Kn-t)/this.Or();this.sr=f(this.ir).Pr+i,this.Js=!0,this.Tr()}},t.prototype.qh=function(){null!==this.Kn&&(this.Kn=null,this.jr())},t.prototype.qr=function(){this.Hr(this.xi.rightOffset)},t.prototype.Hr=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var h=this.sr,s=Date.now(),r=function(){var e=(Date.now()-s)/i,u=e>=1,a=u?t:h+(t-h)*e;n._r(a),u||setTimeout(r,20)};r()},t.prototype.V=function(t){this.Js=!0,this.Ks=t,this.$s.Vs(t),this.Tr()},t.prototype.Yr=function(){return this.Gs},t.prototype.Kr=function(){return this.Qs},t.prototype.$r=function(){return this.tr},t.prototype.Br=function(){return this.Ys||0},t.prototype.Xr=function(t){var i=t.Es();this.Cr(this.Hs/i),this.sr=t.hs()-this.Br(),this.Tr(),this.Js=!0,this.hi.Vr(),this.hi.zr()},t.prototype.Zr=function(){var t=this.pr(),i=this.yr();null!==t&&null!==i&&this.Xr(new Ct(t,i+this.xi.rightOffset))},t.prototype.Jr=function(t){var i=new Ct(t.from,t.to);this.Xr(i)},t.prototype.ri=function(t){return void 0!==this.Jn.timeFormatter?this.Jn.timeFormatter(t.Ns||t.Ss):this.Gr.format(new Date(1e3*t.Ss))},t.prototype.pr=function(){return 0===this.Ks.length?null:0},t.prototype.yr=function(){return 0===this.Ks.length?null:this.Ks.length-1},t.prototype.Qr=function(t){return(this.Hs-1-t)/this.rr},t.prototype.Ar=function(t){var i=this.Qr(t),n=this.Br()+this.sr-i;return Math.round(1e6*n)/1e6},t.prototype.Cr=function(t){var i=this.rr;this.rr=t,this.Dr(),i!==this.rr&&(this.Js=!0,this.te())},t.prototype.Mr=function(){if(this.Js)if(this.Js=!1,this.Qt())this.ie(Et.qs());else{var t=this.Br(),i=this.Hs/this.rr,n=this.sr+t,h=new Ct(n-i+1,n);this.ie(new Et(h))}},t.prototype.Dr=function(){var t=this.ne();if(this.rr<t&&(this.rr=t,this.Js=!0),0!==this.Hs){var i=.5*this.Hs;this.rr>i&&(this.rr=i,this.Js=!0)}},t.prototype.ne=function(){return this.xi.fixLeftEdge&&this.xi.fixRightEdge?this.Hs/this.Ks.length:this.xi.minBarSpacing},t.prototype.Tr=function(){var t=this.he();this.sr>t&&(this.sr=t,this.Js=!0);var i=this.se();null!==i&&this.sr<i&&(this.sr=i,this.Js=!0)},t.prototype.se=function(){var t=this.pr(),i=this.Ys;return null===t||null===i?null:t-i-1+(this.xi.fixLeftEdge?this.Hs/this.rr:Math.min(2,this.Ks.length))},t.prototype.he=function(){return this.xi.fixRightEdge?0:this.Hs/this.rr-Math.min(2,this.Ks.length)},t.prototype.Rr=function(){this.ir={Or:this.Or(),Pr:this.Pr()}},t.prototype.jr=function(){this.ir=null},t.prototype.Fr=function(t,i){var n=this,h=this.Xs.get(i);return void 0===h&&(h=new St((function(t){return n.re(t,i)})),this.Xs.set(i,h)),h.xs(t)},t.prototype.re=function(t,i){var n,h,s=this.xi.timeVisible;return h=i<20&&s?this.xi.secondsVisible?4:3:i<40&&s?3:i<50||i<60?2:i<70?1:0,void 0!==this.xi.tickMarkFormatter?this.xi.tickMarkFormatter(null!==(n=t.Ns)&&void 0!==n?n:t.Ss,h,this.Jn.locale):function(t,i,n){var h={};switch(i){case 0:h.year="numeric";break;case 1:h.month="short";break;case 2:h.day="numeric";break;case 3:h.hour12=!1,h.hour="2-digit",h.minute="2-digit";break;case 4:h.hour12=!1,h.hour="2-digit",h.minute="2-digit",h.second="2-digit"}var s=void 0===t.Ns?new Date(1e3*t.Ss):new Date(Date.UTC(t.Ns.year,t.Ns.month-1,t.Ns.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(n,h)}(t,h,this.Jn.locale)},t.prototype.ie=function(t){var i=this.Zs;this.Zs=t,Dt(i.Rs(),this.Zs.Rs())||this.Gs.nn(),Dt(i.js(),this.Zs.js())||this.Qs.nn(),this.te()},t.prototype.te=function(){this.nr=null},t.prototype.ar=function(){this.te(),this.Xs.clear()},t.prototype.er=function(){var t=this.Jn.dateFormat;this.xi.timeVisible?this.Gr=new Nt({os:t,ls:this.xi.secondsVisible?"%h:%m:%s":"%h:%m",fs:"   ",cs:this.Jn.locale}):this.Gr=new yt(t,this.Jn.locale)},t.prototype.lr=function(){if(this.xi.fixLeftEdge){var t=this.pr();if(null!==t){var i=f(this.wr()).ns()-t;if(i<0){var n=this.sr-i-1;this._r(n)}this.Dr()}}},t.prototype.cr=function(){this.Tr(),this.Dr()},t}();function At(t){return!_(t)&&!w(t)}function Vt(t){return _(t)}var zt="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ot(t,i,n){return void 0!==n?n+=" ":n="",void 0===i&&(i=zt),""+n+t+"px "+i}var Pt=function(){function t(t){this.ee={Dt:1,Ct:4,Ot:NaN,xt:"",ue:"",et:"",Bt:0,Et:0,Lt:0,Tt:0,zt:0,dt:0},this.L=t}return t.prototype.I=function(){var t=this.ee,i=this.ae(),n=this.oe();return t.Ot===i&&t.ue===n||(t.Ot=i,t.ue=n,t.xt=Ot(i,n),t.Tt=Math.floor(i/3.5),t.Bt=t.Tt,t.Et=Math.max(Math.ceil(i/2-t.Ct/2),0),t.Lt=Math.ceil(i/2+t.Ct/2),t.zt=Math.round(i/10)),t.et=this.le(),t.dt=this.Hs(),this.ee},t.prototype.Hs=function(){return this.L.I().rightPriceScale.width},t.prototype.le=function(){return this.L.I().layout.textColor},t.prototype.ae=function(){return this.L.I().layout.fontSize},t.prototype.oe=function(){return this.L.I().layout.fontFamily},t}();function Ft(t){return"left"===t||"right"===t}var It=function(){function t(t){this.fe=new Map,this.ce=!1,this.ve=[],this._e=t}return t.prototype.de=function(t,i){var n=function(t,i){return void 0===t?i:{we:Math.max(t.we,i.we),lh:t.lh||i.lh}}(this.fe.get(t),i);this.fe.set(t,n)},t.prototype.Me=function(){return this._e},t.prototype.be=function(t){var i=this.fe.get(t);return void 0===i?{we:this._e}:{we:Math.max(this._e,i.we),lh:i.lh}},t.prototype.me=function(){this.ve=[{ge:0}]},t.prototype.pe=function(t){this.ve=[{ge:1,J:t}]},t.prototype.ye=function(){this.ve=[{ge:4}]},t.prototype.vr=function(t){this.ve.push({ge:2,J:t})},t.prototype._r=function(t){this.ve.push({ge:3,J:t})},t.prototype.ke=function(){return this.ve},t.prototype.cn=function(t){var i=this;this.ce=this.ce||t.ce,this.ve=this.ve.concat(t.ve);for(var n=0,h=t.ve;n<h.length;n++){var s=h[n];this.xe(s)}this._e=Math.max(this._e,t._e),t.fe.forEach((function(t,n){i.de(n,t)}))},t.prototype.xe=function(t){switch(t.ge){case 0:this.me();break;case 1:this.pe(t.J);break;case 2:this.vr(t.J);break;case 3:this._r(t.J);break;case 4:this.ye()}},t}(),Wt=function(){function t(t){this.Ne=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Se(t):t<999995?i+this.Se(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Se(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Se(t/1e9)+"B")},t.prototype.Se=function(t){var i=Math.pow(10,this.Ne);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Ne).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Ut(t,i,n,h){if(0!==i.length){var s=h.from,r=i[s].g,e=i[s].p;if(t.moveTo(r,e),s++,1===n)for(;s<h.to;s++){var u=i[s],a=i[s-1].p;t.lineTo(u.g,a),t.lineTo(u.g,u.p)}else if(2===n)for(var o=!0;s<h.to;s++){null!==(u=i[s]).F?(o&&(t.moveTo(u.g,u.p),o=!1),t.lineTo(u.g,u.p)):o=!0}else for(;s<h.to;s++){u=i[s];t.lineTo(u.g,u.p)}}}var Rt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return e(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineJoin="round",t.strokeStyle=this.v.S,t.lineWidth=this.v.rt,h(t,this.v.ut),t.lineWidth=1,t.beginPath(),1===this.v.m.length){var i=this.v.m[0],n=this.v.Ce/2;t.moveTo(i.g-n,this.v.De),t.lineTo(i.g-n,i.p),t.lineTo(i.g+n,i.p),t.lineTo(i.g+n,this.v.De)}else t.moveTo(this.v.m[this.v.M.from].g,this.v.De),t.lineTo(this.v.m[this.v.M.from].g,this.v.m[this.v.M.from].p),Ut(t,this.v.m,this.v.Te,this.v.M),this.v.M.to>this.v.M.from&&(t.lineTo(this.v.m[this.v.M.to-1].g,this.v.De),t.lineTo(this.v.m[this.v.M.from].g,this.v.De));t.closePath();var s=t.createLinearGradient(0,0,0,this.v.De);s.addColorStop(0,this.v.Be),s.addColorStop(1,this.v.Ee),t.fillStyle=s,t.fill()}},i}(y),jt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return e(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineWidth=this.v.rt,h(t,this.v.ut),t.strokeStyle=this.v.S,t.lineJoin="round",t.beginPath(),1===this.v.m.length){var i=this.v.m[0];t.moveTo(i.g-this.v.Ce/2,i.p),t.lineTo(i.g+this.v.Ce/2,i.p)}else Ut(t,this.v.m,this.v.Te,this.v.M);t.stroke()}},i}(y);function qt(t,i,n,h,s){void 0===h&&(h=0),void 0===s&&(s=t.length);for(var r=s-h;0<r;){var e=r>>1,u=h+e;n(t[u],i)?(h=u+1,r-=e+1):r=e}return h}function Ht(t,i,n,h,s){void 0===h&&(h=0),void 0===s&&(s=t.length);for(var r=s-h;0<r;){var e=r>>1,u=h+e;n(i,t[u])?r=e:(h=u+1,r-=e+1)}return h}function Yt(t,i){return t.P<i}function Kt(t,i){return t<i.P}function $t(t,i,n){var h=i.ns(),s=i.hs(),r=qt(t,h,Yt),e=Ht(t,s,Kt);if(!n)return{from:r,to:e};var u=r,a=e;return r>0&&r<t.length&&t[r].P>=h&&(u=r-1),e>0&&e<t.length&&t[e-1].P<=s&&(a=e+1),{from:u,to:a}}var Xt=function(){function t(t,i,n){this.Le=!0,this.Ae=!0,this.Ve=!0,this.ze=[],this.Oe=null,this.Pe=t,this.Fe=i,this.Ie=n}return t.prototype.V=function(t){this.Le=!0,"data"===t&&(this.Ae=!0),"options"===t&&(this.Ve=!0)},t.prototype.We=function(){this.Ae&&(this.Ue(),this.Ae=!1),this.Le&&(this.Re(),this.Le=!1),this.Ve&&(this.je(),this.Ve=!1)},t.prototype.qe=function(){this.Oe=null},t.prototype.Re=function(){var t=this.Pe.Z(),i=this.Fe.j();if(this.qe(),!i.Qt()&&!t.Qt()){var n=i.wr();if(null!==n&&0!==this.Pe.qi().He()){var h=this.Pe.Y();null!==h&&(this.Oe=$t(this.ze,n,this.Ie),this.Ye(t,i,h.J))}}},t}(),Zt=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return e(i,t),i.prototype.Ye=function(t,i,n){i.Er(this.ze,g(this.Oe)),t.xh(this.ze,n,g(this.Oe))},i.prototype.Ke=function(t,i){return{P:t,F:i,g:NaN,p:NaN}},i.prototype.je=function(){},i.prototype.Ue=function(){var t=this,i=this.Pe.$e();this.ze=this.Pe.qi().Xe().map((function(n){var h=n.J[3];return t.Ze(n.Os,h,i)}))},i}(Xt),Jt=function(t){function i(i,n){var h=t.call(this,i,n)||this;return h.ot=new p,h.Je=new Rt,h.Ge=new jt,h.ot.i([h.Je,h.Ge]),h}return e(i,t),i.prototype.W=function(t,i){if(!this.Pe.H())return null;var n=this.Pe.I();this.We();var h={Te:n.lineType,m:this.ze,S:n.lineColor,ut:n.lineStyle,rt:n.lineWidth,Be:n.topColor,Ee:n.bottomColor,De:t,M:this.Oe,Ce:this.Fe.j().Or()};return this.Je._(h),this.Ge._(h),this.ot},i.prototype.Ze=function(t,i){return this.Ke(t,i)},i}(Zt);var Gt=function(){function t(){this.tt=null,this.Qe=0,this.tu=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,h){if(null!==this.tt&&0!==this.tt.qi.length&&null!==this.tt.M){if(this.Qe=this.iu(i),this.Qe>=2)Math.max(1,Math.floor(i))%2!=this.Qe%2&&this.Qe--;this.tu=this.tt.nu?Math.min(this.Qe,Math.floor(i)):this.Qe;for(var s=null,r=this.tu<=this.Qe&&this.tt.Or>=Math.floor(1.5*i),e=this.tt.M.from;e<this.tt.M.to;++e){var u=this.tt.qi[e];s!==u.et&&(t.fillStyle=u.et,s=u.et);var a=Math.floor(.5*this.tu),o=Math.round(u.g*i),l=o-a,f=this.tu,c=l+f-1,v=Math.min(u.Dh,u.Th),_=Math.max(u.Dh,u.Th),d=Math.round(v*i)-a,w=Math.round(_*i)+a,M=Math.max(w-d,this.tu);t.fillRect(l,d,f,M);var b=Math.ceil(1.5*this.Qe);if(r){if(this.tt.hu){var m=o-b,g=Math.max(d,Math.round(u.Ch*i)-a),p=g+f-1;p>d+M-1&&(g=(p=d+M-1)-f+1),t.fillRect(m,g,l-m,p-g+1)}var y=o+b,k=Math.max(d,Math.round(u.Bh*i)-a),x=k+f-1;x>d+M-1&&(k=(x=d+M-1)-f+1),t.fillRect(c+1,k,y-c,x-k+1)}}}},t.prototype.iu=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(f(this.tt).Or,t)))},t}(),Qt=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return e(i,t),i.prototype.Ye=function(t,i,n){i.Er(this.ze,g(this.Oe)),t.Sh(this.ze,n,g(this.Oe))},i.prototype.su=function(t,i,n){return{P:t,open:i.J[0],high:i.J[1],low:i.J[2],close:i.J[3],g:NaN,Ch:NaN,Dh:NaN,Th:NaN,Bh:NaN}},i.prototype.Ue=function(){var t=this,i=this.Pe.$e();this.ze=this.Pe.qi().Xe().map((function(n){return t.Ze(n.Os,n,i)}))},i}(Xt),ti=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new Gt,i}return e(i,t),i.prototype.W=function(t,i){if(!this.Pe.H())return null;var n=this.Pe.I();this.We();var h={qi:this.ze,Or:this.Fe.j().Or(),hu:n.openVisible,nu:n.thinBars,M:this.Oe};return this.ot._(h),this.ot},i.prototype.je=function(){var t=this;this.ze.forEach((function(i){i.et=t.Pe.$e().eu(i.P).ru}))},i.prototype.Ze=function(t,i,n){return u(u({},this.su(t,i,n)),{et:n.eu(t).ru})},i}(Qt),ii=function(){function t(){this.tt=null,this.Qe=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,h){if(null!==this.tt&&0!==this.tt.qi.length&&null!==this.tt.M){if(this.Qe=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),h=Math.floor(t*n*i),s=Math.floor(t*i),r=Math.min(h,s);return Math.max(Math.floor(i),r)}(this.tt.Or,i),this.Qe>=2)Math.floor(i)%2!=this.Qe%2&&this.Qe--;var s=this.tt.qi;this.tt.uu&&this.au(t,s,this.tt.M,i),this.tt.ou&&this.lu(t,s,this.tt.M,this.tt.Or,i);var r=this.fu(i);(!this.tt.ou||this.Qe>2*r)&&this.cu(t,s,this.tt.M,i)}},t.prototype.au=function(t,i,n,h){if(null!==this.tt){var s="",r=Math.min(Math.floor(h),Math.floor(this.tt.Or*h));r=Math.max(Math.floor(h),Math.min(r,this.Qe));for(var e=Math.floor(.5*r),u=null,a=n.from;a<n.to;a++){var o=i[a];o.vu!==s&&(t.fillStyle=o.vu,s=o.vu);var l=Math.round(Math.min(o.Ch,o.Bh)*h),f=Math.round(Math.max(o.Ch,o.Bh)*h),c=Math.round(o.Dh*h),v=Math.round(o.Th*h),_=Math.round(h*o.g)-e,d=_+r-1;null!==u&&(_=Math.max(u+1,_),_=Math.min(_,d));var w=d-_+1;t.fillRect(_,c,w,l-c),t.fillRect(_,f+1,w,v-f),u=d}}},t.prototype.fu=function(t){var i=Math.floor(1*t);this.Qe<=2*i&&(i=Math.floor(.5*(this.Qe-1)));var n=Math.max(Math.floor(t),i);return this.Qe<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.lu=function(t,i,n,h,s){if(null!==this.tt)for(var r="",e=this.fu(s),u=null,a=n.from;a<n.to;a++){var o=i[a];o.$!==r&&(t.fillStyle=o.$,r=o.$);var l=Math.round(o.g*s)-Math.floor(.5*this.Qe),f=l+this.Qe-1,c=Math.round(Math.min(o.Ch,o.Bh)*s),v=Math.round(Math.max(o.Ch,o.Bh)*s);if(null!==u&&(l=Math.max(u+1,l),l=Math.min(l,f)),this.tt.Or*s>2*e)z(t,l,c,f-l+1,v-c+1,e);else{var _=f-l+1;t.fillRect(l,c,_,v-c+1)}u=f}},t.prototype.cu=function(t,i,n,h){if(null!==this.tt)for(var s="",r=this.fu(h),e=n.from;e<n.to;e++){var u=i[e],a=Math.round(Math.min(u.Ch,u.Bh)*h),o=Math.round(Math.max(u.Ch,u.Bh)*h),l=Math.round(u.g*h)-Math.floor(.5*this.Qe),f=l+this.Qe-1;if(u.et!==s){var c=u.et;t.fillStyle=c,s=c}this.tt.ou&&(l+=r,a+=r,f-=r,o-=r),a>o||t.fillRect(l,a,f-l+1,o-a+1)}},t}(),ni=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new ii,i}return e(i,t),i.prototype.W=function(t,i){if(!this.Pe.H())return null;var n=this.Pe.I();this.We();var h={qi:this.ze,Or:this.Fe.j().Or(),uu:n.wickVisible,ou:n.borderVisible,M:this.Oe};return this.ot._(h),this.ot},i.prototype.je=function(){var t=this;this.ze.forEach((function(i){var n=t.Pe.$e().eu(i.P);i.et=n.ru,i.vu=n._u,i.$=n.du}))},i.prototype.Ze=function(t,i,n){var h=n.eu(t);return u(u({},this.su(t,i,n)),{et:h.ru,vu:h._u,$:h.du})},i}(Qt),hi=function(){function t(){this.tt=null,this.wu=[]}return t.prototype._=function(t){this.tt=t,this.wu=[]},t.prototype.h=function(t,i,n,h){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){this.wu.length||this.Mu(i);for(var s=Math.max(1,Math.floor(i)),r=Math.round(this.tt.bu*i)-Math.floor(s/2),e=r+s,u=this.tt.M.from;u<this.tt.M.to;u++){var a=this.tt.m[u],o=this.wu[u-this.tt.M.from],l=Math.round(a.p*i);t.fillStyle=a.et;var f=void 0,c=void 0;l<=r?(f=l,c=e):(f=r,c=l-Math.floor(s/2)+s),t.fillRect(o.ns,f,o.hs-o.ns+1,c-f)}}},t.prototype.Mu=function(t){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){var i=Math.ceil(this.tt.Or*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.tt.Or*t)-i;this.wu=new Array(this.tt.M.to-this.tt.M.from);for(var h=this.tt.M.from;h<this.tt.M.to;h++){var s,r=this.tt.m[h],e=Math.round(r.g*t),u=void 0,a=void 0;if(n%2)u=e-(s=(n-1)/2),a=e+s;else u=e-(s=n/2),a=e+s-1;this.wu[h-this.tt.M.from]={ns:u,hs:a,mu:e,gu:r.g*t,P:r.P}}for(h=this.tt.M.from+1;h<this.tt.M.to;h++){var o=this.wu[h-this.tt.M.from],l=this.wu[h-this.tt.M.from-1];o.P===l.P+1&&(o.ns-l.hs!==i+1&&(l.mu>l.gu?l.hs=o.ns-i-1:o.ns=l.hs+i+1))}var f=Math.ceil(this.tt.Or*t);for(h=this.tt.M.from;h<this.tt.M.to;h++){(o=this.wu[h-this.tt.M.from]).hs<o.ns&&(o.hs=o.ns);var c=o.hs-o.ns+1;f=Math.min(c,f)}if(i>0&&f<4)for(h=this.tt.M.from;h<this.tt.M.to;h++){(c=(o=this.wu[h-this.tt.M.from]).hs-o.ns+1)>f&&(o.mu>o.gu?o.hs-=1:o.ns+=1)}}else this.wu=[]},t}();function si(t){return{m:[],Or:t,bu:NaN,M:null}}function ri(t,i,n){return{P:t,F:i,g:NaN,p:NaN,et:n}}var ei=function(t){function i(i,n){var h=t.call(this,i,n,!1)||this;return h.C=new p,h.pu=si(0),h.ot=new hi,h}return e(i,t),i.prototype.W=function(t,i){return this.Pe.H()?(this.We(),this.C):null},i.prototype.Ue=function(){var t=this.Fe.j().Or();this.pu=si(t);for(var i=0,n=0,h=this.Pe.I().color,s=0,r=this.Pe.qi().Xe();s<r.length;s++){var e=r[s],u=e.J[3],a=void 0!==e.et?e.et:h,o=ri(e.Os,u,a);++i<this.pu.m.length?this.pu.m[i]=o:this.pu.m.push(o),this.ze[n++]={P:e.Os,g:0}}this.ot._(this.pu),this.C.i([this.ot])},i.prototype.je=function(){},i.prototype.qe=function(){t.prototype.qe.call(this),this.pu.M=null},i.prototype.Ye=function(t,i,n){if(null!==this.Oe){var h=i.Or(),s=f(i.wr()),r=t.X(this.Pe.I().base,n);i.Er(this.pu.m),t.xh(this.pu.m,n),this.pu.bu=r,this.pu.M=$t(this.pu.m,s,!1),this.pu.Or=h,this.ot._(this.pu)}},i}(Xt),ui=function(t){function i(i,n){var h=t.call(this,i,n)||this;return h.Ge=new jt,h}return e(i,t),i.prototype.W=function(t,i){if(!this.Pe.H())return null;var n=this.Pe.I();this.We();var h={m:this.ze,S:n.color,ut:n.lineStyle,Te:n.lineType,rt:n.lineWidth,M:this.Oe,Ce:this.Fe.j().Or()};return this.Ge._(h),this.Ge},i.prototype.Ze=function(t,i){return this.Ke(t,i)},i}(Zt),ai=/[2-9]/g,oi=function(){function t(t){void 0===t&&(t=50),this.gs=new Map,this.yu=0,this.ku=Array.from(new Array(t))}return t.prototype.xu=function(){this.gs.clear(),this.ku.fill(void 0)},t.prototype.Vt=function(t,i,n){var h=n||ai,s=String(i).replace(h,"0"),r=this.gs.get(s);if(void 0===r){if(0===(r=t.measureText(s).width)&&0!==i.length)return 0;var e=this.ku[this.yu];void 0!==e&&this.gs.delete(e),this.ku[this.yu]=s,this.yu=(this.yu+1)%this.ku.length,this.gs.set(s,r)}return r},t}(),li=function(){function t(t){this.Nu=null,this.ee=null,this.Su="right",this.Hs=0,this.Cu=t}return t.prototype.Du=function(t,i,n,h){this.Nu=t,this.ee=i,this.Hs=n,this.Su=h},t.prototype.h=function(t,i){null!==this.ee&&null!==this.Nu&&this.Nu.h(t,this.ee,this.Cu,this.Hs,this.Su,i)},t}(),fi=function(){function t(t,i,n){this.Tu=t,this.Cu=new oi(50),this.Bu=i,this.L=n,this.ae=-1,this.ot=new li(this.Cu)}return t.prototype.W=function(t,i){var n=this.L.Eu(this.Bu);if(null===n)return null;var h=n.Lu(this.Bu)?n.Ci():this.Bu.Z();if(null===h)return null;var s=n.Au(h);if("overlay"===s)return null;var r=this.L.Vu();return r.Ot!==this.ae&&(this.ae=r.Ot,this.Cu.xu()),this.ot.Du(this.Tu.Xt(),r,i,s),this.ot},t}(),ci=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,r){if(null!==this.tt&&!1!==this.tt.H){var e=Math.round(this.tt.p*i);if(!(e<0||e>Math.ceil(this.tt.wt*i))){var u=Math.ceil(this.tt.dt*i);t.lineCap="butt",t.strokeStyle=this.tt.et,t.lineWidth=Math.floor(this.tt.rt*i),h(t,this.tt.ut),s(t,e,0,u)}}},t}(),vi=function(){function t(t){this.zu={dt:0,wt:0,p:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,H:!1},this.Ou=new ci,this.B=!0,this.Pe=t,this.Fe=t.ct(),this.Ou._(this.zu)}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.Pe.H()?(this.B&&(this.Pu(t,i),this.B=!1),this.Ou):null},t}(),_i=function(t){function i(i){return t.call(this,i)||this}return e(i,t),i.prototype.Pu=function(t,i){this.zu.H=!1;var n=this.Pe.Z(),h=n.rh().rh;if(2===h||3===h){var s=this.Pe.I();if(s.baseLineVisible&&this.Pe.H()){var r=this.Pe.Y();null!==r&&(this.zu.H=!0,this.zu.p=n.X(r.J,r.J),this.zu.dt=i,this.zu.wt=t,this.zu.et=s.baseLineColor,this.zu.rt=s.baseLineWidth,this.zu.ut=s.baseLineStyle)}}},i}(vi);function di(t,i){return ht(Math.min(Math.max(t,12),30)*i)}function wi(t,i){switch(t){case"arrowDown":case"arrowUp":return di(i,1);case"circle":return di(i,.8);case"square":return di(i,.7);case"triangleDown":case"triangleUp":return di(i,.7)}}function Mi(t){return nt(di(t,1))}function bi(t){return Math.max(di(t,.1),3)}function mi(t,i,n,h,s){var r=wi("square",n),e=(r-1)/2,u=t-e,a=i-e;return h>=u&&h<=u+r&&s>=a&&s<=a+r}function gi(t,i,n,h,s,r,e){var u=i.fillStyle,a=(wi("arrowUp",s)-1)/2,o=(ht(s/2)-1)/2;if(e&&(i.fillStyle=e),i.beginPath(),t?(i.moveTo(n-a,h),i.lineTo(n,h-a),i.lineTo(n+a,h),i.lineTo(n+o,h),i.lineTo(n+o,h+a),i.lineTo(n-o,h+a),i.lineTo(n-o,h)):(i.moveTo(n-a,h),i.lineTo(n,h+a),i.lineTo(n+a,h),i.lineTo(n+o,h),i.lineTo(n+o,h-a),i.lineTo(n-o,h-a),i.lineTo(n-o,h)),e){var l=r||2,f=2*l;i.fill(),i.beginPath(),i.fillStyle=u,t?(i.moveTo(n-a+f,h-l),i.lineTo(n,h-a+l),i.lineTo(n+a-f,h-l),i.lineTo(n+o-l,h-l),i.lineTo(n+o-l,h+a-l),i.lineTo(n-o+l,h+a-l),i.lineTo(n-o+l,h-l)):(i.moveTo(n-a+f,h+l),i.lineTo(n,h+a-l),i.lineTo(n+a-f,h+l),i.lineTo(n+o-l,h+l),i.lineTo(n+o-l,h-a+l),i.lineTo(n-o+l,h-a+l),i.lineTo(n-o+l,h+l))}i.fill()}function pi(t,i,n,h,s,r){return mi(i,n,h,s,r)}function yi(t,i,n,h,s,r,e){var u=i.fillStyle,a=(wi("triangleUp",s)-1)/2,o=n-a,l=n+a,f=h-a,c=h+a;if(i.beginPath(),e&&(i.fillStyle=e),t?(i.moveTo(o,c),i.lineTo(n,f),i.lineTo(l,c)):(i.moveTo(o,f),i.lineTo(n,c),i.lineTo(l,f)),e){var v=r||2,_=2*v;i.fill(),i.beginPath(),i.fillStyle=u,t?(i.moveTo(o+v,c-v),i.lineTo(n,f+_),i.lineTo(l-v,c-v)):(i.moveTo(o+v,f+v),i.lineTo(n,c-_),i.lineTo(l-v,f+v))}i.fill()}function ki(t,i,n,h,s,r){return mi(i,n,h,s,r)}var xi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.tt=null,i.Cu=new oi,i.ae=-1,i.oe="",i.Fu="",i}return e(i,t),i.prototype._=function(t){this.tt=t},i.prototype.Du=function(t,i){this.ae===t&&this.oe===i||(this.ae=t,this.oe=i,this.Fu=Ot(t,i),this.Cu.xu())},i.prototype.Iu=function(t,i){if(null===this.tt||null===this.tt.M)return null;for(var n=this.tt.M.from;n<this.tt.M.to;n++){var h=this.tt.m[n];if(Si(h,t,i))return{Wu:h.Uu,Ru:h.Ru}}return null},i.prototype.u=function(t,i,n){if(null!==this.tt&&null!==this.tt.M){t.textBaseline="middle",t.font=this.Fu;for(var h=this.tt.M.from;h<this.tt.M.to;h++){var s=this.tt.m[h];void 0!==s.At&&(s.At.dt=this.Cu.Vt(t,s.At.ju),s.At.wt=this.ae),Ni(s,t)}}},i}(y);function Ni(t,i){i.fillStyle=t.et,void 0!==t.At&&function(t,i,n,h){t.fillText(i,n,h)}(i,t.At.ju,t.g-t.At.dt/2,t.At.p),function(t,i){if(0===t.He)return;switch(t.qu){case"arrowDown":return void gi(!1,i,t.g,t.p,t.He,t.Dt,t.$);case"arrowUp":return void gi(!0,i,t.g,t.p,t.He,t.Dt,t.$);case"triangleDown":return void yi(!1,i,t.g,t.p,t.He,t.Dt,t.$);case"triangleUp":return void yi(!0,i,t.g,t.p,t.He,t.Dt,t.$);case"circle":return void function(t,i,n,h,s,r){var e=t.fillStyle,u=(wi("circle",h)-1)/2;if(r&&(t.fillStyle=r),t.beginPath(),t.arc(i,n,u,0,2*Math.PI,!1),r){var a=s||2;t.fill(),t.beginPath(),t.fillStyle=e,t.arc(i,n,u-a,0,2*Math.PI,!1)}t.fill()}(i,t.g,t.p,t.He,t.Dt,t.$);case"square":return void function(t,i,n,h,s,r){var e=t.fillStyle,u=wi("square",h),a=(u-1)/2,o=i-a,l=n-a;if(r&&(t.fillStyle=r),t.fillRect(o,l,u,u),r){var f=s||2,c=2*f;t.fillStyle=e,t.fillRect(o+f,l+f,u-c,u-c)}}(i,t.g,t.p,t.He,t.Dt,t.$)}t.qu}(t,i)}function Si(t,i,n){return!(void 0===t.At||!function(t,i,n,h,s,r){var e=h/2;return s>=t&&s<=t+n&&r>=i-e&&r<=i+e}(t.g,t.At.p,t.At.dt,t.At.wt,i,n))||function(t,i,n){if(0===t.He)return!1;switch(t.qu){case"arrowUp":case"arrowDown":return pi(0,t.g,t.p,t.He,i,n);case"triangleUp":case"triangleDown":return ki(0,t.g,t.p,t.He,i,n);case"circle":return function(t,i,n,h,s){var r=2+wi("circle",n)/2,e=t-h,u=i-s;return Math.sqrt(e*e+u*u)<=r}(t.g,t.p,t.He,i,n);case"square":return mi(t.g,t.p,t.He,i,n)}t.qu}(t,i,n)}function Ci(t,i,n,h,s,r,e,u,a){var o=_(n)?n:n.close,l=_(n)?n:n.high,f=_(n)?n:n.low,c=_(i.size)?Math.max(i.size,0):1,v=Mi(u.Or())*c,d=v/2;if(t.He=v,"number"==typeof i.position)return t.p=e.X(i.position,a),void(void 0!==t.At&&(t.At.p=t.p+d+r+.6*s));switch(i.position){case"inBar":return t.p=e.X(o,a),void(void 0!==t.At&&(t.At.p=t.p+d+r+.6*s));case"aboveBar":return t.p=e.X(l,a)-d-h.Hu,void 0!==t.At&&(t.At.p=t.p-d-.6*s,h.Hu+=1.2*s),void(h.Hu+=v+r);case"belowBar":return t.p=e.X(f,a)+d+h.Yu,void 0!==t.At&&(t.At.p=t.p+d+r+.6*s,h.Yu+=1.2*s),void(h.Yu+=v+r)}i.position}var Di=function(){function t(t,i){this.B=!0,this.Ku=!0,this.$u=!0,this.Xu=null,this.ot=new xi,this.Zu=t,this.hi=i,this.tt={m:[],M:null}}return t.prototype.V=function(t){this.B=!0,this.$u=!0,"data"===t&&(this.Ku=!0)},t.prototype.W=function(t,i,n){if(!this.Zu.H())return null;this.B&&this.We();var h=this.hi.I().layout;return this.ot.Du(h.fontSize,h.fontFamily),this.ot._(this.tt),this.ot},t.prototype.Ju=function(){if(this.$u){if(this.Zu.Gu().length>0){var t=this.hi.j().Or(),i=bi(t),n=1.5*Mi(t)+2*i;this.Xu={above:n,below:n}}else this.Xu=null;this.$u=!1}return this.Xu},t.prototype.We=function(){var t=this.Zu.Z(),i=this.hi.j(),n=this.Zu.Gu();this.Ku&&(this.tt.m=n.map((function(t){return{P:t.time,g:0,p:0,He:0,qu:t.shape,et:t.color,Uu:t.Uu,Ru:t.id,At:void 0,$:t.borderColor,Dt:t.borderSize}})),this.Ku=!1);var h=this.hi.I().layout;this.tt.M=null;var s=i.wr();if(null!==s){var r=this.Zu.Y();if(null!==r&&0!==this.tt.m.length){var e=NaN,u=bi(i.Or()),a={Hu:u,Yu:u};this.tt.M=$t(this.tt.m,s,!0);for(var o=this.tt.M.from;o<this.tt.M.to;o++){var l=n[o];l.time!==e&&(a.Hu=u,a.Yu=u,e=l.time);var f=this.tt.m[o];f.g=i.G(l.time),void 0!==l.text&&l.text.length>0&&(f.At={ju:l.text,p:0,dt:0,wt:0});var c=this.Zu.Qu(l.time);null!==c&&Ci(f,l,c,a,h.fontSize,u,t,i,r.J)}this.B=!1}}},t}(),Ti=function(t){function i(i){return t.call(this,i)||this}return e(i,t),i.prototype.Pu=function(t,i){var n=this.zu;n.H=!1;var h=this.Pe.I();if(h.priceLineVisible&&this.Pe.H()){var s=this.Pe.ta(0===h.priceLineSource);s.ia||(n.H=!0,n.p=s.Pt,n.et=this.Pe.na(s.et),n.dt=i,n.wt=t,n.rt=h.priceLineWidth,n.ut=h.priceLineStyle)}},i}(vi),Bi=function(t){function i(i){var n=t.call(this)||this;return n.lt=i,n}return e(i,t),i.prototype.Zt=function(t,i,n){if(t.H=!1,i.H=!1,this.lt.H()){var h=this.lt.I(),s=h.lastValueVisible,r=""!==this.lt.ha(),e=0===h.seriesLastValueMode,u=this.lt.ta(0===h.priceLineSource);if(!u.ia){s&&(t.At=this.sa(u,s,e),t.H=0!==t.At.length),(r||e)&&(i.At=this.ra(u,s,r,e),i.H=i.At.length>0);var a=this.lt.na(u.et),o=V(a);n.gt=o.gt,n.et=o.yt,n.Pt=u.Pt,i.$=this.lt.ct().I().layout.backgroundColor,t.$=a}}},i.prototype.ra=function(t,i,n,h){var s="",r=this.lt.ha();return n&&0!==r.length&&(s+=r+" "),i&&h&&(s+=this.lt.Z().ah()?t.ea:t.ua),s.trim()},i.prototype.sa=function(t,i,n){return i?n?this.lt.Z().ah()?t.ua:t.ea:t.At:""},i}(W),Ei=function(){function t(t,i){this.Vn=t,this.aa=i||null}return t.prototype.ph=function(){return this.Vn},t.prototype.ss=function(){return this.aa},t.prototype.dn=function(){return null===this.Vn?null:{priceRange:this.Vn.dn(),margins:this.aa||void 0}},t.wn=function(i){return null===i?null:new t(G.wn(i.priceRange),i.margins)},t}(),Li=function(t){function i(i,n){var h=t.call(this,i)||this;return h.oa=n,h}return e(i,t),i.prototype.Pu=function(t,i){var n=this.zu;if(n.H=!1,this.Pe.H()){var h=this.oa.la();if(null!==h){var s=this.oa.I();n.H=!0,n.p=h,n.et=s.color,n.dt=i,n.wt=t,n.rt=s.lineWidth,n.ut=s.lineStyle}}},i}(vi),Ai=function(t){function i(i,n){var h=t.call(this)||this;return h.Zu=i,h.oa=n,h}return e(i,t),i.prototype.Zt=function(t,i,n){t.H=!1,i.H=!1;var h=this.oa.I(),s=h.axisLabelVisible,r=""!==h.title;if(s&&this.Zu.H()){var e=this.oa.la();if(null!==e){r&&(i.At=h.title,i.H=!0),i.$=this.Zu.ct().I().layout.backgroundColor,t.At=this.Zu.Z().Kh(h.price),t.H=!0;var u=V(h.color);n.gt=u.gt,n.et=u.yt,n.Pt=e}}},i}(W),Vi=function(){function t(t,i){this.Zu=t,this.xi=i,this.fa=new Li(t,this),this.Tu=new Ai(t,this),this.ca=new fi(this.Tu,t,t.ct())}return t.prototype.nh=function(t){v(this.xi,t),this.V(),this.Zu.ct().zr()},t.prototype.I=function(){return this.xi},t.prototype.ci=function(){return[this.fa,this.ca]},t.prototype.va=function(){return this.Tu},t.prototype.V=function(){this.fa.V(),this.Tu.V()},t.prototype.la=function(){var t=this.Zu,i=t.Z();if(t.ct().j().Qt()||i.Qt())return null;var n=t.Y();return null===n?null:i.X(this.xi.price,n.J)},t}(),zi=function(t){function i(i){var n=t.call(this)||this;return n.hi=i,n}return e(i,t),i.prototype.ct=function(){return this.hi},i}(H),Oi={ru:"",du:"",_u:""},Pi=function(){function t(t){this.Zu=t}return t.prototype.eu=function(t,i){var n=this.Zu._a(),h=this.Zu.I();switch(n){case"Line":return this.da(h);case"Area":return this.wa(h);case"Bar":return this.Ma(h,t,i);case"Candlestick":return this.ba(h,t,i);case"Histogram":return this.ma(h,t,i)}throw new Error("Unknown chart style")},t.prototype.Ma=function(t,i,n){var h=u({},Oi),s=t.upColor,r=t.downColor,e=s,a=r,o=f(this.ga(i,n)),l=c(o.J[0])<=c(o.J[3]);return h.ru=l?s:r,h.du=l?e:a,h},t.prototype.ba=function(t,i,n){var h=u({},Oi),s=t.upColor,r=t.downColor,e=t.borderUpColor,a=t.borderDownColor,o=t.wickUpColor,l=t.wickDownColor,v=f(this.ga(i,n)),_=c(v.J[0])<=c(v.J[3]);return h.ru=_?s:r,h.du=_?e:a,h._u=_?o:l,h},t.prototype.wa=function(t){return u(u({},Oi),{ru:t.lineColor})},t.prototype.da=function(t){return u(u({},Oi),{ru:t.color})},t.prototype.ma=function(t,i,n){var h=u({},Oi),s=f(this.ga(i,n));return h.ru=void 0!==s.et?s.et:t.color,h},t.prototype.ga=function(t,i){return void 0!==i?i.J:this.Zu.qi().pa(t)},t}(),Fi=function(){function t(){this.ya=[],this.ka=new Map,this.xa=new Map}return t.prototype.Na=function(){this.ya=[],this.ka.clear(),this.xa.clear()},t.prototype.Sa=function(){return this.He()>0?this.ya[this.ya.length-1]:null},t.prototype.Ca=function(){return this.He()>0?this.Da(0):null},t.prototype.ji=function(){return this.He()>0?this.Da(this.ya.length-1):null},t.prototype.He=function(){return this.ya.length},t.prototype.Qt=function(){return 0===this.He()},t.prototype.Ls=function(t){return null!==this.Ta(t,0)},t.prototype.pa=function(t){return this.Ba(t)},t.prototype.Ba=function(t,i){void 0===i&&(i=0);var n=this.Ta(t,i);return null===n?null:u(u({},this.Ea(n)),{Os:this.Da(n)})},t.prototype.Xe=function(){return this.ya},t.prototype.La=function(t,i,n){if(this.Qt())return null;for(var h=null,s=0,r=n;s<r.length;s++){var e=r[s];h=Ii(h,this.Aa(t,i,e))}return h},t.prototype.cn=function(t){0!==t.length&&(this.Qt()||t[t.length-1].Os<this.ya[0].Os?this.Va(t):t[0].Os>this.ya[this.ya.length-1].Os?this.za(t):1!==t.length||t[0].Os!==this.ya[this.ya.length-1].Os?this.Oa(t):this.Pa(t[0]))},t.prototype.Da=function(t){return this.ya[t].Os},t.prototype.Ea=function(t){return this.ya[t]},t.prototype.Ta=function(t,i){var n=this.Fa(t);if(null===n&&0!==i)switch(i){case-1:return this.Ia(t);case 1:return this.Wa(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.Ia=function(t){var i=this.Ua(t);return i>0&&(i-=1),i!==this.ya.length&&this.Da(i)<t?i:null},t.prototype.Wa=function(t){var i=this.Ra(t);return i!==this.ya.length&&t<this.Da(i)?i:null},t.prototype.Fa=function(t){var i=this.Ua(t);return i===this.ya.length||t<this.ya[i].Os?null:i},t.prototype.Ua=function(t){return qt(this.ya,t,(function(t,i){return t.Os<i}))},t.prototype.Ra=function(t){return Ht(this.ya,t,(function(t,i){return i.Os>t}))},t.prototype.ja=function(t,i,n){for(var h=null,s=t;s<i;s++){var r=this.ya[s].J[n];Number.isNaN(r)||null===r||(null===h?h={qa:r,Ha:r}:(r<h.qa&&(h.qa=r),r>h.Ha&&(h.Ha=r)))}return h},t.prototype.Ya=function(t){var i=Math.floor(t.Os/30);this.ka.forEach((function(t){return t.delete(i)}))},t.prototype.Va=function(t){o(0!==t.length,"plotRows should not be empty"),this.xa.clear(),this.ka.clear(),this.ya=t.concat(this.ya)},t.prototype.za=function(t){o(0!==t.length,"plotRows should not be empty"),this.xa.clear(),this.ka.clear(),this.ya=this.ya.concat(t)},t.prototype.Pa=function(t){o(!this.Qt(),"plot list should not be empty"),o(this.ya[this.ya.length-1].Os===t.Os,"last row index should match new row index"),this.Ya(t),this.xa.delete(t.Os),this.ya[this.ya.length-1]=t},t.prototype.Oa=function(t){o(0!==t.length,"plot rows should not be empty"),this.xa.clear(),this.ka.clear(),this.ya=function(t,i){var n=function(t,i){var n=t.length,h=i.length,s=n+h,r=0,e=0;for(;r<n&&e<h;)t[r].Os<i[e].Os?r++:t[r].Os>i[e].Os?e++:(r++,e++,s--);return s}(t,i),h=new Array(n),s=0,r=0,e=t.length,u=i.length,a=0;for(;s<e&&r<u;)t[s].Os<i[r].Os?(h[a]=t[s],s++):t[s].Os>i[r].Os?(h[a]=i[r],r++):(h[a]=i[r],s++,r++),a++;for(;s<e;)h[a]=t[s],s++,a++;for(;r<u;)h[a]=i[r],r++,a++;return h}(this.ya,t)},t.prototype.Aa=function(t,i,n){if(this.Qt())return null;var h=null,s=f(this.Ca()),r=f(this.ji()),e=Math.max(t,s),u=Math.min(i,r),a=30*Math.ceil(e/30),o=Math.max(a,30*Math.floor(u/30)),l=this.Ua(e),c=this.Ra(Math.min(u,a,i));h=Ii(h,this.ja(l,c,n));var v=this.ka.get(n);void 0===v&&(v=new Map,this.ka.set(n,v));for(var _=Math.max(a+1,e);_<o;_+=30){var d=Math.floor(_/30),w=v.get(d);if(void 0===w){var M=this.Ua(30*d),b=this.Ra(30*(d+1)-1);w=this.ja(M,b,n),v.set(d,w)}h=Ii(h,w)}l=this.Ua(o),c=this.Ra(u);return h=Ii(h,this.ja(l,c,n))},t}();function Ii(t,i){return null===t?i:null===i?t:{qa:Math.min(t.qa,i.qa),Ha:Math.max(t.Ha,i.Ha)}}var Wi=function(t){function i(i,n,h){var s=t.call(this,i)||this;s.tt=new Fi,s.fa=new Ti(s),s.Ka=[],s.$a=new _i(s),s.Xa=null,s.Za=[],s.Ja=[],s.xi=n,s.Ga=h;var r=new Bi(s);return s.bi=[r],s.ca=new fi(r,s,i),s.Qa(),s.io(),s}return e(i,t),i.prototype.sn=function(){},i.prototype.na=function(t){return this.xi.priceLineColor||t},i.prototype.ta=function(t,i){var n={ia:!0},h=this.Z();if(this.ct().j().Qt()||h.Qt()||this.tt.Qt())return n;var s,r,e=this.ct().j().wr(),u=this.Y();if(null===e||null===u)return n;if(t){var a=this.tt.Sa();if(null===a)return n;s=a,r=a.Os}else{var o=this.tt.Ba(e.hs(),-1);if(null===o)return n;if(null===(s=this.tt.pa(o.Os)))return n;r=o.Os}var l=s.J[3],f=this.$e().eu(r,{J:s}),c=h.X(l,u.J);return{ia:!1,F:i?l:void 0,At:h.ti(l,u.J),ea:h.Kh(l),ua:h.Xh(l,u.J),et:f.ru,Pt:c,Os:r}},i.prototype.$e=function(){return null!==this.Xa||(this.Xa=new Pi(this)),this.Xa},i.prototype.I=function(){return this.xi},i.prototype.nh=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.xi.priceScaleId&&this.ct().no(this,i),v(this.xi,t),null!==this.ei&&void 0!==t.scaleMargins&&this.ei.nh({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.Qa(),this.ct().ho(this),this.ct().so(),this.Bi.V("options")},i.prototype.ro=function(){this.tt.Na(),this.io()},i.prototype.eo=function(t,i){i&&this.tt.Na(),this.tt.cn(t),this.uo(),this.Bi.V("data"),this.Ni.V("data");var n=this.ct().Eu(this);this.ct().ao(n),this.ct().ho(this),this.ct().so(),this.ct().zr()},i.prototype.oo=function(t){this.Za=t.map((function(t){return u({},t)})),this.uo();var i=this.ct().Eu(this);this.Ni.V("data"),this.ct().ao(i),this.ct().ho(this),this.ct().so(),this.ct().zr()},i.prototype.Gu=function(){return this.Ja},i.prototype.lo=function(t){var i=new Vi(this,t);return this.Ka.push(i),this.ct().ho(this),i},i.prototype.fo=function(t){var i=this.Ka.indexOf(t);-1!==i&&this.Ka.splice(i,1),this.ct().ho(this)},i.prototype._a=function(){return this.Ga},i.prototype.Y=function(){var t=this.co();return null===t?null:{J:t.J[3],Ph:t.P}},i.prototype.co=function(){var t=this.ct().j().wr();if(null===t)return null;var i=t.ns();return this.tt.Ba(i,1)},i.prototype.qi=function(){return this.tt},i.prototype.Qu=function(t){var i=this.tt.pa(t);return null===i?null:"Bar"===this.Ga||"Candlestick"===this.Ga?{open:i.J[0],high:i.J[1],low:i.J[2],close:i.J[3]}:i.J[3]},i.prototype.ci=function(){var t=[];this.vo()||t.push(this.$a);for(var i=0,n=this.Ka;i<n.length;i++){var h=n[i];t.push.apply(t,h.ci())}return t.push(this.Bi,this.fa,this.ca,this.Ni),t},i.prototype.fi=function(t,i){for(var n=i===this.ei||this.vo()?a([],this.bi):[],h=0,s=this.Ka;h<s.length;h++){var r=s[h];n.push(r.va())}return n},i.prototype.ts=function(t,i){var n=this;if(void 0!==this.xi.autoscaleInfoProvider){var h=this.xi.autoscaleInfoProvider((function(){var h=n._o(t,i);return null===h?null:h.dn()}));return Ei.wn(h)}return this._o(t,i)},i.prototype.Gh=function(){return this.xi.priceFormat.minMove},i.prototype.Hh=function(){return this.$n},i.prototype.Wi=function(){this.Bi.V(),this.Ni.V();for(var t=0,i=this.bi;t<i.length;t++){i[t].V()}for(var n=0,h=this.Ka;n<h.length;n++){h[n].V()}this.fa.V(),this.$a.V()},i.prototype.Z=function(){return f(this.ei)},i.prototype.q=function(t){if(!(("Line"===this.Ga||"Area"===this.Ga)&&this.xi.crosshairMarkerVisible))return null;var i=this.tt.pa(t);return null===i?null:{F:i.J[3],N:this.do(),$:this.wo(),K:this.Mo(t)}},i.prototype.ha=function(){return this.xi.title},i.prototype.H=function(){return this.xi.visible},i.prototype.vo=function(){return!Ft(this.Z().ih())},i.prototype._o=function(t,i){if(!d(t)||!d(i)||this.tt.Qt())return null;var n="Line"===this.Ga||"Area"===this.Ga||"Histogram"===this.Ga?[3]:[2,1],h=this.tt.La(t,i,n),s=null!==h?new G(h.qa,h.Ha):null;if("Histogram"===this._a()){var r=this.xi.base,e=new G(r,r);s=null!==s?s.cn(e):e}return new Ei(s,this.Ni.Ju())},i.prototype.do=function(){switch(this.Ga){case"Line":case"Area":return this.xi.crosshairMarkerRadius}return 0},i.prototype.wo=function(){switch(this.Ga){case"Line":case"Area":var t=this.xi.crosshairMarkerBorderColor;if(0!==t.length)return t}return this.ct().I().layout.backgroundColor},i.prototype.Mo=function(t){switch(this.Ga){case"Line":case"Area":var i=this.xi.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.$e().eu(t).ru},i.prototype.Qa=function(){switch(this.xi.priceFormat.type){case"custom":this.$n={format:this.xi.priceFormat.formatter};break;case"volume":this.$n=new Wt(this.xi.priceFormat.precision);break;case"percent":this.$n=new Z(this.xi.priceFormat.precision);break;default:var t=Math.pow(10,this.xi.priceFormat.precision);this.$n=new X(t,this.xi.priceFormat.minMove*t)}null!==this.ei&&this.ei.hh()},i.prototype.uo=function(){var t=this,i=this.ct().j();if(i.Qt()||0===this.tt.He())this.Ja=[];else{var n=f(this.tt.Ca());this.Ja=this.Za.map((function(h,s){var r=f(i.dr(h.time,!0)),e=r<n?1:-1;return{time:f(t.tt.Ba(r,e)).Os,position:h.position,shape:h.shape,color:h.color,id:h.id,Uu:s,text:h.text,size:h.size,borderColor:h.borderColor,borderSize:h.borderSize}}))}},i.prototype.io=function(){switch(this.Ni=new Di(this,this.ct()),this.Ga){case"Bar":this.Bi=new ti(this,this.ct());break;case"Candlestick":this.Bi=new ni(this,this.ct());break;case"Line":this.Bi=new ui(this,this.ct());break;case"Area":this.Bi=new Jt(this,this.ct());break;case"Histogram":this.Bi=new ei(this,this.ct());break;default:throw Error("Unknown chart style assigned: "+this.Ga)}},i}(zi),Ui=function(){function t(t){this.xi=t}return t.prototype.bo=function(t,i,n){var h=t;if(0===this.xi.mode)return h;var s=n.Ci(),r=s.Y();if(null===r)return h;var e=s.X(t,r),u=n.Lh().filter((function(t){return t instanceof Wi})).reduce((function(t,h){if(n.Lu(h)||!h.H())return t;var s=h.Z(),r=h.qi();if(s.Qt()||!r.Ls(i))return t;var e=r.pa(i);if(null===e)return t;var u=c(h.Y());return t.concat([s.X(e.J[3],u.J)])}),[]);if(0===u.length)return h;u.sort((function(t,i){return Math.abs(t-e)-Math.abs(i-e)}));var a=u[0];return h=s.Di(a,r)},t}(),Ri=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,s){var r=this;if(null!==this.tt){var e=Math.max(1,Math.floor(i));t.lineWidth=e;var u=Math.ceil(this.tt.st*i),a=Math.ceil(this.tt.ht*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=f(r.tt);if(n.mo){t.strokeStyle=n.po,h(t,n.yo),t.beginPath();for(var s=0,o=n.ko;s<o.length;s++){var l=o[s],c=Math.round(l.Cn*i);t.moveTo(c,-e),t.lineTo(c,u+e)}t.stroke()}if(n.xo){t.strokeStyle=n.No,h(t,n.So),t.beginPath();for(var v=0,_=n.Co;v<_.length;v++){var d=_[v],w=Math.round(d.Cn*i);t.moveTo(-e,w),t.lineTo(a+e,w)}t.stroke()}}))}},t}(),ji=function(){function t(t){this.ot=new Ri,this.B=!0,this._i=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){if(this.B){var n=this._i.ct().I().grid,h={st:t,ht:i,xo:n.horzLines.visible,mo:n.vertLines.visible,No:n.horzLines.color,po:n.vertLines.color,So:n.horzLines.style,yo:n.vertLines.style,Co:this._i.Ci().En(),ko:this._i.ct().j().En()||[]};this.ot._(h),this.B=!1}return this.ot},t}(),qi=function(){function t(t){this.Bi=new ji(t)}return t.prototype.Do=function(){return this.Bi},t}(),Hi=function(){function t(t,i){this.jn=[],this.To=new Map,this.Ln=0,this.Hs=0,this.Bo=1e3,this.qn=null,this.Eo=new J,this.Lo=t,this.hi=i,this.Ao=new qi(this);var n=i.I();this.Vo=this.zo("left",n.leftPriceScale),this.Oo=this.zo("right",n.rightPriceScale),this.Vo.wh().Xi(this.Po.bind(this,this.Vo),this),this.Oo.wh().Xi(this.Po.bind(this,this.Vo),this),this.Fo(n)}return t.prototype.Fo=function(t){if(t.leftPriceScale&&this.Vo.nh(t.leftPriceScale),t.rightPriceScale&&this.Oo.nh(t.rightPriceScale),t.localization&&(this.Vo.hh(),this.Oo.hh()),t.overlayPriceScales)for(var i=0,n=Array.from(this.To.values());i<n.length;i++){var h=f(n[i][0].Z());h.nh(t.overlayPriceScales),t.localization&&h.hh()}},t.prototype.Io=function(t){switch(t){case"left":return this.Vo;case"right":return this.Oo}return this.To.has(t)?l(this.To.get(t))[0].Z():null},t.prototype.sn=function(){this.ct().Wo().tn(this),this.Vo.wh().tn(this),this.Oo.wh().tn(this),this.jn.forEach((function(t){t.sn&&t.sn()})),this.Eo.nn()},t.prototype.Uo=function(){return this.Bo},t.prototype.Ro=function(t){this.Bo=t},t.prototype.ct=function(){return this.hi},t.prototype.dt=function(){return this.Hs},t.prototype.wt=function(){return this.Ln},t.prototype.Sr=function(t){this.Hs=t,this.jo()},t.prototype.Mh=function(t){var i=this;this.Ln=t,this.Vo.Mh(t),this.Oo.Mh(t),this.jn.forEach((function(n){if(i.Lu(n)){var h=n.Z();null!==h&&h.Mh(t)}})),this.jo()},t.prototype.Lh=function(){return this.jn},t.prototype.Lu=function(t){var i=t.Z();return null===i||this.Vo!==i&&this.Oo!==i},t.prototype.Vh=function(t,i,n){var h=void 0!==n?n:this.Ho().qo-1;this.Yo(t,i,h)},t.prototype.Oh=function(t){var i=this.jn.indexOf(t);o(-1!==i,"removeDataSource: invalid data source"),this.jn.splice(i,1);var n=f(t.Z()).ih();if(this.To.has(n)){var h=l(this.To.get(n)),s=h.indexOf(t);-1!==s&&(h.splice(s,1),0===h.length&&this.To.delete(n))}var r=t.Z();r&&r.Lh().indexOf(t)>=0&&r.Oh(t),null!==r&&(r.zh(),this.Ko(r)),this.qn=null},t.prototype.Au=function(t){return t===this.Vo?"left":t===this.Oo?"right":"overlay"},t.prototype.$o=function(){return this.Vo},t.prototype.Xo=function(){return this.Oo},t.prototype.Zo=function(t,i){t.Ih(i)},t.prototype.Jo=function(t,i){t.Wh(i),this.jo()},t.prototype.Go=function(t){t.Uh()},t.prototype.Qo=function(t,i){t.Rh(i)},t.prototype.tl=function(t,i){t.jh(i),this.jo()},t.prototype.il=function(t){t.qh()},t.prototype.jo=function(){this.jn.forEach((function(t){t.Wi()}))},t.prototype.Ci=function(){var t=null;return this.hi.I().rightPriceScale.visible&&0!==this.Oo.Lh().length?t=this.Oo:this.hi.I().leftPriceScale.visible&&0!==this.Vo.Lh().length?t=this.Vo:0!==this.jn.length&&(t=this.jn[0].Z()),null===t&&(t=this.Oo),t},t.prototype.Ko=function(t){null!==t&&t.uh()&&this.nl(t)},t.prototype.hl=function(t){var i=this.Lo.wr();t.sh({lh:!0}),null!==i&&t.Jh(i),this.jo()},t.prototype.sl=function(){this.nl(this.Vo),this.nl(this.Oo)},t.prototype.rl=function(){var t=this;this.Ko(this.Vo),this.Ko(this.Oo),this.jn.forEach((function(i){t.Lu(i)&&t.Ko(i.Z())})),this.jo(),this.hi.zr()},t.prototype.Ah=function(){return null===this.qn&&(this.qn=_t(this.jn)),this.qn},t.prototype.el=function(){return this.Eo},t.prototype.ul=function(){return this.Ao},t.prototype.nl=function(t){var i=t.Zh();if(i&&i.length>0&&!this.Lo.Qt()){var n=this.Lo.wr();null!==n&&t.Jh(n)}t.Wi()},t.prototype.Ho=function(){var t=this.Ah();if(0===t.length)return{qo:0,al:0};for(var i=0,n=0,h=0;h<t.length;h++){var s=t[h].ai();null!==s&&(s<i&&(i=s),s>n&&(n=s))}return{qo:i,al:n}},t.prototype.Yo=function(t,i,n){var h=this.Io(i);if(null===h&&(h=this.zo(i,this.hi.I().overlayPriceScales)),this.jn.push(t),!Ft(i)){var s=this.To.get(i)||[];s.push(t),this.To.set(i,s)}h.Vh(t),t.li(h),t.oi(n),this.Ko(h),this.qn=null},t.prototype.Po=function(t,i,n){i.rh!==n.rh&&this.nl(t)},t.prototype.zo=function(t,i){var n=u({visible:!0,autoScale:!0},b(i)),h=new bt(t,n,this.hi.I().layout,this.hi.I().localization);return h.Mh(this.wt()),h},t}(),Yi=function(t){function i(i){var n=t.call(this)||this;return n.ol=new Map,n.tt=i,n}return e(i,t),i.prototype.u=function(t){},i.prototype.l=function(t){if(this.tt.H){t.save();for(var i=0,n=0,h=this.tt.ll;n<h.length;n++){if(0!==(a=h[n]).At.length){t.font=a.xt;var s=this.fl(t,a.At);s>this.tt.dt?a.Ur=this.tt.dt/s:a.Ur=1,i+=a.cl*a.Ur}}var r=0;switch(this.tt.vl){case"top":r=0;break;case"center":r=Math.max((this.tt.wt-i)/2,0);break;case"bottom":r=Math.max(this.tt.wt-i,0)}t.fillStyle=this.tt.et;for(var e=0,u=this.tt.ll;e<u.length;e++){var a=u[e];t.save();var o=0;switch(this.tt._l){case"left":t.textAlign="left",o=a.cl/2;break;case"center":t.textAlign="center",o=this.tt.dt/2;break;case"right":t.textAlign="right",o=this.tt.dt-1-a.cl/2}t.translate(o,r),t.textBaseline="top",t.font=a.xt,t.scale(a.Ur,a.Ur),t.fillText(a.At,0,a.dl),t.restore(),r+=a.cl*a.Ur}t.restore()}},i.prototype.fl=function(t,i){var n=this.wl(t.font),h=n.get(i);return void 0===h&&(h=t.measureText(i).width,n.set(i,h)),h},i.prototype.wl=function(t){var i=this.ol.get(t);return void 0===i&&(i=new Map,this.ol.set(t,i)),i},i}(y),Ki=function(){function t(t){this.B=!0,this.at={H:!1,et:"",wt:0,dt:0,ll:[],vl:"center",_l:"center"},this.ot=new Yi(this.at),this.lt=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.B&&(this.U(t,i),this.B=!1),this.ot},t.prototype.U=function(t,i){var n=this.lt.I(),h=this.at;h.H=n.visible,h.H&&(h.et=n.color,h.dt=i,h.wt=t,h._l=n.horzAlign,h.vl=n.vertAlign,h.ll=[{At:n.text,xt:Ot(n.fontSize,n.fontFamily,n.fontStyle),cl:1.2*n.fontSize,dl:0,Ur:0}])},t}(),$i=function(t){function i(i,n){var h=t.call(this)||this;return h.xi=n,h.Bi=new Ki(h),h}return e(i,t),i.prototype.ci=function(){return[this.Bi]},i.prototype.I=function(){return this.xi},i.prototype.Wi=function(){this.Bi.V()},i}(H),Xi=function(){function t(t,i){this.Ml=[],this.bl=[],this.Hs=0,this.ml=null,this.gl=null,this.pl=new J,this.yl=new J,this.kl=t,this.xi=i,this.xl=new Pt(this),this.Lo=new Lt(this,i.timeScale,this.xi.localization),this.A=new Y(this,i.crosshair),this.Nl=new Ui(i.crosshair),this.Sl=new $i(this,i.watermark),this.Cl(),this.Ml[0].Ro(2e3)}return t.prototype.Dl=function(){this.Tl(new It(3))},t.prototype.zr=function(){this.Tl(new It(2))},t.prototype.ho=function(t){var i=this.Bl(t);this.Tl(i)},t.prototype.El=function(){return this.gl},t.prototype.Ll=function(t){var i=this.gl;this.gl=t,null!==i&&this.ho(i.Al),null!==t&&this.ho(t.Al)},t.prototype.I=function(){return this.xi},t.prototype.nh=function(t){v(this.xi,t),this.Ml.forEach((function(i){return i.Fo(t)})),void 0!==t.timeScale&&this.Lo.nh(t.timeScale),void 0!==t.localization&&this.Lo.ur(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.pl.nn(),this.Dl()},t.prototype.Vl=function(t,i){var n=this.zl(t);null!==n&&(n.Z.nh(i),this.pl.nn())},t.prototype.zl=function(t){for(var i=0,n=this.Ml;i<n.length;i++){var h=n[i],s=h.Io(t);if(null!==s)return{ft:h,Z:s}}return null},t.prototype.j=function(){return this.Lo},t.prototype.Ol=function(){return this.Ml},t.prototype.Pl=function(){return this.Sl},t.prototype.Fl=function(){return this.A},t.prototype.Il=function(){return this.yl},t.prototype.Wl=function(t,i){t.Mh(i),this.Vr()},t.prototype.Sr=function(t){this.Hs=t,this.Lo.Sr(this.Hs),this.Ml.forEach((function(i){return i.Sr(t)})),this.Vr()},t.prototype.Cl=function(t){var i=new Hi(this.Lo,this);void 0!==t?this.Ml.splice(t,0,i):this.Ml.push(i);var n=void 0===t?this.Ml.length-1:t,h=new It(3);return h.de(n,{we:0,lh:!0}),this.Tl(h),i},t.prototype.Zo=function(t,i,n){t.Zo(i,n)},t.prototype.Jo=function(t,i,n){t.Jo(i,n),this.so(),this.Tl(this.Ul(t,2))},t.prototype.Go=function(t,i){t.Go(i),this.Tl(this.Ul(t,2))},t.prototype.Qo=function(t,i,n){i.uh()||t.Qo(i,n)},t.prototype.tl=function(t,i,n){i.uh()||(t.tl(i,n),this.so(),this.Tl(this.Ul(t,2)))},t.prototype.il=function(t,i){i.uh()||(t.il(i),this.Tl(this.Ul(t,2)))},t.prototype.hl=function(t,i){t.hl(i),this.Tl(this.Ul(t,2))},t.prototype.Rl=function(t){this.Lo.Ih(t)},t.prototype.jl=function(t,i){var n=this.j();if(!n.Qt()&&0!==i){var h=n.dt();t=Math.max(1,Math.min(t,h)),n.Ur(t,i),this.Vr()}},t.prototype.ql=function(t){this.Hl(0),this.Yl(t),this.Kl()},t.prototype.$l=function(t){this.Lo.Wh(t),this.Vr()},t.prototype.Xl=function(){this.Lo.Uh(),this.zr()},t.prototype.Hl=function(t){this.ml=t,this.Lo.Rh(t)},t.prototype.Yl=function(t){var i=!1;return null!==this.ml&&Math.abs(t-this.ml)>20&&(this.ml=null,i=!0),this.Lo.jh(t),this.Vr(),i},t.prototype.Kl=function(){this.Lo.qh(),this.zr(),this.ml=null},t.prototype.O=function(){return this.bl},t.prototype.Zl=function(t,i,n){this.A.Ei(t,i);var h=NaN,s=this.Lo.Lr(t),r=this.Lo.wr();null!==r&&(s=Math.min(Math.max(r.ns(),s),r.hs()));var e=n.Ci(),u=e.Y();null!==u&&(h=e.Di(i,u)),h=this.Nl.bo(h,s,n),this.A.zi(s,h,n),this.Jl(),this.yl.nn(this.A.R(),{x:t,y:i})},t.prototype.Gl=function(){this.Fl().Pi(),this.Jl(),this.yl.nn(null,null)},t.prototype.so=function(){var t=this.A.ft();if(null!==t){var i=this.A.Ai(),n=this.A.Vi();this.Zl(i,n,t)}this.A.Wi()},t.prototype.Ql=function(t,i){var n=this.Lo.si(0);void 0!==i&&this.Lo.V(i);var h=this.Lo.si(0),s=this.Lo.Br(),r=this.Lo.wr();if(null!==r&&null!==n&&null!==h){var e=r.Ls(s),u=n.Ss>h.Ss,a=null!==t&&t>s&&!u,o=e&&this.Lo.I().shiftVisibleRangeOnNewBar;if(a&&!o&&null!==t){var l=t-s;this.Lo._r(this.Lo.Pr()-l)}}this.Lo.Wr(t)},t.prototype.ao=function(t){null!==t&&t.rl()},t.prototype.Eu=function(t){var i=this.Ml.find((function(i){return i.Ah().includes(t)}));return void 0===i?null:i},t.prototype.Vr=function(){this.Sl.Wi(),this.Ml.forEach((function(t){return t.rl()})),this.so()},t.prototype.sn=function(){this.Ml.forEach((function(t){return t.sn()})),this.Ml.length=0,this.xi.localization.priceFormatter=void 0,this.xi.localization.timeFormatter=void 0},t.prototype.tf=function(){return this.xl},t.prototype.Vu=function(){return this.xl.I()},t.prototype.Wo=function(){return this.pl},t.prototype.if=function(t,i){var n=this.Ml[0],h=this.nf(i,t,n);return this.bl.push(h),1===this.bl.length?this.Dl():this.zr(),h},t.prototype.hf=function(t){var i=this.Eu(t),n=this.bl.indexOf(t);o(-1!==n,"Series not found"),this.bl.splice(n,1),f(i).Oh(t),t.sn&&t.sn()},t.prototype.no=function(t,i){var n=f(this.Eu(t));n.Oh(t);var h=this.zl(i);if(null===h){var s=t.ai();n.Vh(t,i,s)}else{s=h.ft===n?t.ai():void 0;h.ft.Vh(t,i,s)}},t.prototype.Zr=function(){var t=new It(2);t.me(),this.Tl(t)},t.prototype.sf=function(t){var i=new It(2);i.pe(t),this.Tl(i)},t.prototype.ye=function(){var t=new It(2);t.ye(),this.Tl(t)},t.prototype.vr=function(t){var i=new It(2);i.vr(t),this.Tl(i)},t.prototype._r=function(t){var i=new It(2);i._r(t),this.Tl(i)},t.prototype.rf=function(){return this.xi.rightPriceScale.visible?"right":"left"},t.prototype.Ul=function(t,i){var n=new It(i);if(null!==t){var h=this.Ml.indexOf(t);n.de(h,{we:i})}return n},t.prototype.Bl=function(t,i){return void 0===i&&(i=2),this.Ul(this.Eu(t),i)},t.prototype.Tl=function(t){this.kl&&this.kl(t),this.Ml.forEach((function(t){return t.ul().Do().V()}))},t.prototype.Jl=function(){this.Tl(new It(1))},t.prototype.nf=function(t,i,n){var h=new Wi(this,t,i),s=void 0!==t.priceScaleId?t.priceScaleId:this.rf();return n.Vh(h,s),Ft(s)||h.nh(t),h},t}(),Zi=function(){function t(t,i){this.ht=t,this.st=i}return t.prototype.un=function(t){return this.ht===t.ht&&this.st===t.st},t}();function Ji(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function Gi(t){var i=f(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function Qi(t,i){var n=t.createElement("canvas"),h=Ji(n);return n.style.width=i.ht+"px",n.style.height=i.st+"px",n.width=i.ht*h,n.height=i.st*h,n}function tn(i,n){var h=f(i.ownerDocument).createElement("canvas");i.appendChild(h);var s=t(h);return s.resizeCanvas({width:n.ht,height:n.st}),s}var nn="undefined"!=typeof window;var hn=function(){if(!nn)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!nn&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}();var sn=function(){if(!nn)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),rn=function(){function t(t,i,n){this.ef=0,this.uf=null,this.af=null,this.lf=!1,this.ff=null,this.cf=!1,this.vf=!1,this._f=null,this.df=null,this.wf=null,this.Mf=null,this.bf=0,this.mf=!1,this.gf=!1,this.pf=!1,this.yf=t,this.kf=i,this.xi=n,this.xf()}return t.prototype.sn=function(){null!==this._f&&(this._f(),this._f=null),null!==this.df&&(this.df(),this.df=null),null!==this.wf&&(this.wf(),this.wf=null),this.Nf(),this.Sf()},t.prototype.Cf=function(t){var i=this;this.df&&this.df();var n=this.Df.bind(this);this.df=function(){i.yf.removeEventListener("mousemove",n)},this.yf.addEventListener("mousemove",n),an(t)&&this.Df(t);var h=this.Tf(t);this.Bf(h,this.kf.Ef)},t.prototype.Sf=function(){null!==this.uf&&clearTimeout(this.uf),this.ef=0,this.uf=null},t.prototype.Df=function(t){if(!this.pf||an(t)){var i=this.Tf(t);this.Bf(i,this.kf.Lf)}},t.prototype.Af=function(t){if((!("button"in t)||0===t.button)&&null===this.Mf){var i=an(t);if(!this.gf||!i){this.mf=!0;var n=this.Tf(t),h=c(this.ff),s=Math.abs(h.g-n.Vf),r=Math.abs(h.p-n.zf),e=s+r>5;if(e||!i){if(e&&!this.cf&&i){var u=.5*s,a=r>=u&&!this.xi.Of,o=u>r&&!this.xi.Pf;a||o||(this.gf=!0)}e&&(this.cf=!0,this.vf=!0,i&&this.Nf()),this.gf||(this.Bf(n,this.kf.Ff),i&&on(t))}}}},t.prototype.If=function(t){if(!("button"in t)||0===t.button){var i=this.Tf(t);this.Nf(),this.ff=null,this.pf=!1,this.wf&&(this.wf(),this.wf=null),an(t)&&this.Wf(t),this.Bf(i,this.kf.Uf),++this.ef,this.uf&&this.ef>1?(this.Bf(i,this.kf.Rf),this.Sf()):this.vf||this.Bf(i,this.kf.jf),an(t)&&(on(t),this.Wf(t),0===t.touches.length&&(this.lf=!1))}},t.prototype.Nf=function(){null!==this.af&&(clearTimeout(this.af),this.af=null)},t.prototype.qf=function(t){if(!("button"in t)||0===t.button){var i=this.Tf(t);this.vf=!1,this.cf=!1,this.gf=!1,an(t)&&this.Cf(t),this.ff={g:i.Vf,p:i.zf},this.wf&&(this.wf(),this.wf=null);var n=this.Af.bind(this),h=this.If.bind(this),s=this.yf.ownerDocument.documentElement;this.wf=function(){s.removeEventListener("touchmove",n),s.removeEventListener("touchend",h),s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",h)},s.addEventListener("touchmove",n,{passive:!1}),s.addEventListener("touchend",h,{passive:!1}),this.Nf(),an(t)&&1===t.touches.length?this.af=setTimeout(this.Hf.bind(this,t),240):(s.addEventListener("mousemove",n),s.addEventListener("mouseup",h)),this.pf=!0,this.Bf(i,this.kf.Yf),this.uf||(this.ef=0,this.uf=setTimeout(this.Sf.bind(this),500))}},t.prototype.xf=function(){var t=this;this.yf.addEventListener("mouseenter",this.Cf.bind(this)),this.yf.addEventListener("touchcancel",this.Nf.bind(this));var i=this.yf.ownerDocument,n=function(i){t.kf.Kf&&(i.composed&&t.yf.contains(i.composedPath()[0])||i.target&&t.yf.contains(i.target)||t.kf.Kf())};this._f=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.yf.addEventListener("mouseleave",this.Wf.bind(this)),this.yf.addEventListener("touchstart",this.qf.bind(this),{passive:!0}),hn||this.yf.addEventListener("mousedown",this.qf.bind(this)),this.$f(),this.yf.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.$f=function(){var t=this;void 0===this.kf.Xf&&void 0===this.kf.Zf&&void 0===this.kf.Jf||(this.yf.addEventListener("touchstart",(function(i){return t.Gf(i.touches)}),{passive:!0}),this.yf.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.Mf&&void 0!==t.kf.Zf){var n=un(i.touches[0],i.touches[1])/t.bf;t.kf.Zf(t.Mf,n),on(i)}}),{passive:!1}),this.yf.addEventListener("touchend",(function(i){t.Gf(i.touches)})))},t.prototype.Gf=function(t){1===t.length&&(this.mf=!1),2!==t.length||this.mf||this.lf?this.Qf():this.tc(t)},t.prototype.tc=function(t){var i=en(this.yf);this.Mf={g:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,p:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.bf=un(t[0],t[1]),void 0!==this.kf.Xf&&this.kf.Xf(),this.Nf()},t.prototype.Qf=function(){null!==this.Mf&&(this.Mf=null,void 0!==this.kf.Jf&&this.kf.Jf())},t.prototype.Wf=function(t){this.df&&this.df();var i=this.Tf(t);this.Bf(i,this.kf.ic)},t.prototype.Hf=function(t){var i=this.Tf(t);this.Bf(i,this.kf.nc),this.vf=!0,this.lf=!0},t.prototype.Bf=function(t,i){i&&i.call(this.kf,t)},t.prototype.Tf=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=en(this.yf);return{hc:i.clientX,sc:i.clientY,Vf:i.pageX,zf:i.pageY,rc:i.screenX,ec:i.screenY,uc:i.clientX-n.left,ac:i.clientY-n.top,oc:t.ctrlKey,lc:t.altKey,fc:t.shiftKey,cc:t.metaKey,ge:t.type.startsWith("mouse")?"mouse":"touch",vc:t.view}},t}();function en(t){return t.getBoundingClientRect()||{left:0,top:0}}function un(t,i){var n=t.clientX-i.clientX,h=t.clientY-i.clientY;return Math.sqrt(n*n+h*h)}function an(t){return Boolean(t.touches)}function on(t){t.cancelable&&t.preventDefault()}var ln=function(){function t(t,i,n,h){this.Cu=new oi(200),this.ae=0,this._c="",this.Fu="",this.ku=[],this.dc=new Map,this.ae=t,this._c=i,this.Fu=Ot(t,n,h)}return t.prototype.sn=function(){this.Cu.xu(),this.ku=[],this.dc.clear()},t.prototype.wc=function(t,i,n,h,s){var r=this.Mc(t,i);if("left"!==s){var e=Ji(t.canvas);n-=Math.floor(r.bc*e)}h-=Math.floor(r.wt/2),t.drawImage(r.mc,n,h,r.dt,r.wt)},t.prototype.Mc=function(t,i){var n,h=this;if(this.dc.has(i))n=l(this.dc.get(i));else{if(this.ku.length>=200){var s=l(this.ku.shift());this.dc.delete(s)}var r=Ji(t.canvas),e=Math.ceil(this.ae/4.5),u=Math.round(this.ae/10),a=Math.ceil(this.Cu.Vt(t,i)),o=nt(Math.round(a+2*e)),f=nt(this.ae+2*e),c=Qi(document,new Zi(o,f));n={At:i,bc:Math.round(Math.max(1,a)),dt:Math.ceil(o*r),wt:Math.ceil(f*r),mc:c},0!==a&&(this.ku.push(n.At),this.dc.set(n.At,n)),O(t=Gi(n.mc),r,(function(){t.font=h.Fu,t.fillStyle=h._c,t.fillText(i,0,f-e-u)}))}return n},t}(),fn=function(){function t(t,i,n,h){var s=this;this.Jt=null,this.gc=null,this.yc=null,this.kc=!1,this.xc=new oi(50),this.Nc=new ln(11,"#000"),this._c=null,this.Fu=null,this.Sc=0,this.Cc=function(){s.Dc(s.xl.I()),s._i.Tc().ct().zr()},this.Bc=function(){s._i.Tc().ct().zr()},this._i=t,this.xi=i,this.xl=n,this.Ec="left"===h,this.Lc=document.createElement("div"),this.Lc.style.height="100%",this.Lc.style.overflow="hidden",this.Lc.style.width="25px",this.Lc.style.left="0",this.Lc.style.position="relative",this.Ac=tn(this.Lc,new Zi(16,16)),this.Ac.subscribeCanvasConfigured(this.Cc);var r=this.Ac.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Vc=tn(this.Lc,new Zi(16,16)),this.Vc.subscribeCanvasConfigured(this.Bc);var e=this.Vc.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0";var u={Yf:this.zc.bind(this),Ff:this.Oc.bind(this),Kf:this.Pc.bind(this),Uf:this.Fc.bind(this),Rf:this.Ic.bind(this),Ef:this.Wc.bind(this),ic:this.Uc.bind(this)};this.Rc=new rn(this.Vc.canvas,u,{Of:!1,Pf:!0})}return t.prototype.sn=function(){this.Rc.sn(),this.Vc.unsubscribeCanvasConfigured(this.Bc),this.Vc.destroy(),this.Ac.unsubscribeCanvasConfigured(this.Cc),this.Ac.destroy(),null!==this.Jt&&this.Jt.Fh().tn(this),this.Jt=null,null!==this.yc&&(clearTimeout(this.yc),this.yc=null),this.Nc.sn()},t.prototype.jc=function(){return this.Lc},t.prototype.K=function(){return this.xi.backgroundColor},t.prototype.S=function(){return f(this.Jt).I().borderColor},t.prototype.qc=function(){return this.xi.textColor},t.prototype.Ot=function(){return this.xi.fontSize},t.prototype.Hc=function(){return Ot(this.Ot(),this.xi.fontFamily)},t.prototype.Yc=function(){var t=this.xl.I(),i=this._c!==t.et,n=this.Fu!==t.xt;return(i||n)&&(this.Dc(t),this._c=t.et),n&&(this.xc.xu(),this.Fu=t.xt),t},t.prototype.Kc=function(){if(null===this.Jt)return 0;var t=34,i=this.Yc(),n=Gi(this.Ac.canvas),h=this.Jt.En();n.font=this.Hc(),h.length>0&&(t=Math.max(this.xc.Vt(n,h[0].Dn),this.xc.Vt(n,h[h.length-1].Dn)));for(var s=this.$c(),r=s.length;r--;){var e=this.xc.Vt(n,s[r].At());e>t&&(t=e)}t=Math.max(t,i.dt);var u=Math.ceil(i.Dt+i.Ct+i.Et+i.Lt+t);return u+=u%2},t.prototype.Xc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.gc&&this.gc.un(t)||(this.gc=t,this.Ac.resizeCanvas({width:t.ht,height:t.st}),this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Lc.style.width=t.ht+"px",this.Lc.style.height=t.st+"px",this.Lc.style.minWidth=t.ht+"px")},t.prototype.Zc=function(){return f(this.gc).ht},t.prototype.li=function(t){this.Jt!==t&&(null!==this.Jt&&this.Jt.Fh().tn(this),this.Jt=t,t.Fh().Xi(this.Un.bind(this),this))},t.prototype.Z=function(){return this.Jt},t.prototype.xu=function(){var t=this._i.Jc();this._i.Tc().ct().hl(t,f(this.Z()))},t.prototype.Gc=function(t){if(null!==this.gc){if(1!==t){var i=Gi(this.Ac.canvas);this.Qc(),this.tv(i,this.Ac.pixelRatio),this.lu(i,this.Ac.pixelRatio),this.iv(i,this.Ac.pixelRatio),this.nv(i,this.Ac.pixelRatio)}var n=Gi(this.Vc.canvas),h=this.gc.ht,s=this.gc.st;O(n,this.Vc.pixelRatio,(function(){n.clearRect(0,0,h,s)})),this.hv(n,this.Vc.pixelRatio)}},t.prototype.sv=function(){return this.Ac.canvas},t.prototype.zc=function(t){if(null!==this.Jt&&!this.Jt.Qt()&&this._i.Tc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Tc().ct(),n=this._i.Jc();this.kc=!0,i.Zo(n,this.Jt,t.ac)}},t.prototype.Oc=function(t){if(null!==this.Jt&&this._i.Tc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Tc().ct(),n=this._i.Jc(),h=this.Jt;i.Jo(n,h,t.ac)}},t.prototype.Pc=function(){if(null!==this.Jt&&this._i.Tc().I().handleScale.axisPressedMouseMove.price){var t=this._i.Tc().ct(),i=this._i.Jc(),n=this.Jt;this.kc&&(this.kc=!1,t.Go(i,n))}},t.prototype.Fc=function(t){if(null!==this.Jt&&this._i.Tc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Tc().ct(),n=this._i.Jc();this.kc=!1,i.Go(n,this.Jt)}},t.prototype.Ic=function(t){this._i.Tc().I().handleScale.axisDoubleClickReset&&this.xu()},t.prototype.Wc=function(t){null!==this.Jt&&(!this._i.Tc().ct().I().handleScale.axisPressedMouseMove.price||this.Jt.ah()||this.Jt.oh()||this.rv(1))},t.prototype.Uc=function(t){this.rv(0)},t.prototype.$c=function(){var t=this,i=[],n=null===this.Jt?void 0:this.Jt;return function(h){for(var s=0;s<h.length;++s)for(var r=h[s].fi(t._i.Jc(),n),e=0;e<r.length;e++)i.push(r[e])}(this._i.Jc().Ah()),i},t.prototype.tv=function(t,i){var n=this;if(null!==this.gc){var h=this.gc.ht,s=this.gc.st;O(t,i,(function(){P(t,0,0,h,s,n.K())}))}},t.prototype.lu=function(t,i){if(null!==this.gc&&null!==this.Jt&&this.Jt.I().borderVisible){t.save(),t.fillStyle=this.S();var n,h=Math.max(1,Math.floor(this.Yc().Dt*i));n=this.Ec?Math.floor(this.gc.ht*i)-h:0,t.fillRect(n,0,h,Math.ceil(this.gc.st*i)),t.restore()}},t.prototype.iv=function(t,i){if(null!==this.gc&&null!==this.Jt){var n=this.Jt.En();t.save(),t.strokeStyle=this.S(),t.font=this.Hc(),t.fillStyle=this.S();var h=this.Yc(),s=this.Jt.I().borderVisible&&this.Jt.I().drawTicks,r=this.Ec?Math.floor((this.gc.ht-h.Ct)*i-h.Dt*i):Math.floor(h.Dt*i),e=this.Ec?Math.round(r-h.Et*i):Math.round(r+h.Ct*i+h.Et*i),u=this.Ec?"right":"left",a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(s){var l=Math.round(h.Ct*i);t.beginPath();for(var f=0,c=n;f<c.length;f++){var v=c[f];t.rect(r,Math.round(v.Cn*i)-o,l,a)}t.fill()}t.fillStyle=this.qc();for(var _=0,d=n;_<d.length;_++){v=d[_];this.Nc.wc(t,v.Dn,e,Math.round(v.Cn*i),u)}t.restore()}},t.prototype.Qc=function(){if(null!==this.gc&&null!==this.Jt){var t=this.gc.st/2,i=[],n=this.Jt.Ah().slice(),h=this._i.Jc(),s=this.Yc();this.Jt===h.Ci()&&this._i.Jc().Ah().forEach((function(t){h.Lu(t)&&n.push(t)}));var r=this.Jt.Lh()[0],e=this.Jt;n.forEach((function(n){var s=n.fi(h,e);s.forEach((function(t){t.Yt(null),t.Kt()&&i.push(t)})),r===n&&s.length>0&&(t=s[0].Pt())}));var u=i.filter((function(i){return i.Pt()<=t})),a=i.filter((function(i){return i.Pt()>t}));if(u.sort((function(t,i){return i.Pt()-t.Pt()})),u.length&&a.length&&a.push(u[0]),a.sort((function(t,i){return t.Pt()-i.Pt()})),i.forEach((function(t){return t.Yt(t.Pt())})),this.Jt.I().alignLabels){for(var o=1;o<u.length;o++){var l=u[o],f=(v=u[o-1]).wt(s,!1);l.Pt()>(_=v.Ht())-f&&l.Yt(_-f)}for(var c=1;c<a.length;c++){var v,_;l=a[c],f=(v=a[c-1]).wt(s,!0);l.Pt()<(_=v.Ht())+f&&l.Yt(_+f)}}}},t.prototype.nv=function(t,i){var n=this;if(null!==this.gc){t.save();var h=this.gc,s=this.$c(),r=this.Yc(),e=this.Ec?"right":"left";s.forEach((function(s){if(s.$t()){var u=s.W(f(n.Jt));t.save(),u.h(t,r,n.xc,h.ht,e,i),t.restore()}})),t.restore()}},t.prototype.hv=function(t,i){var n=this;if(null!==this.gc&&null!==this.Jt){t.save();var h=this.gc,s=this._i.Tc().ct(),r=[],e=this._i.Jc(),u=s.Fl().fi(e,this.Jt);u.length&&r.push(u);var a=this.Yc(),o=this.Ec?"right":"left";r.forEach((function(s){s.forEach((function(s){t.save(),s.W(f(n.Jt)).h(t,a,n.xc,h.ht,o,i),t.restore()}))})),t.restore()}},t.prototype.rv=function(t){this.Lc.style.cursor=1===t?"ns-resize":"default"},t.prototype.Un=function(){var t=this,i=this.Kc();if(this.Sc<i){var n=this._i.Tc();null===this.yc&&(this.yc=setTimeout((function(){n&&n.ct().Dl(),t.yc=null}),100))}this.Sc=i},t.prototype.Dc=function(t){this.Nc.sn(),this.Nc=new ln(t.Ot,t.et,t.ue)},t}(),cn=sn,vn=function(){function t(t,i){var n=this;this.gc=new Zi(0,0),this.ev=null,this.uv=null,this.av=null,this.ov=!1,this.lv=new J,this.fv=0,this.cv=!1,this.vv=null,this._v=!1,this.dv=null,this.Cc=function(){return n.wv&&n.hi().zr()},this.Bc=function(){return n.wv&&n.hi().zr()},this.Mv=t,this.wv=i,this.wv.el().Xi(this.bv.bind(this),this,!0),this.mv=document.createElement("td"),this.mv.style.padding="0",this.mv.style.position="relative";var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.position="relative",h.style.overflow="hidden",this.gv=document.createElement("td"),this.gv.style.padding="0",this.pv=document.createElement("td"),this.pv.style.padding="0",this.mv.appendChild(h),this.Ac=tn(h,new Zi(16,16)),this.Ac.subscribeCanvasConfigured(this.Cc);var s=this.Ac.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Vc=tn(h,new Zi(16,16)),this.Vc.subscribeCanvasConfigured(this.Bc);var r=this.Vc.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.yv=document.createElement("tr"),this.yv.appendChild(this.gv),this.yv.appendChild(this.mv),this.yv.appendChild(this.pv),this.kv();var e=this.Tc().I().handleScroll;this.Rc=new rn(this.Vc.canvas,this,{Of:!e.vertTouchDrag,Pf:!e.horzTouchDrag})}return t.prototype.sn=function(){null!==this.ev&&this.ev.sn(),null!==this.uv&&this.uv.sn(),this.Vc.unsubscribeCanvasConfigured(this.Bc),this.Vc.destroy(),this.Ac.unsubscribeCanvasConfigured(this.Cc),this.Ac.destroy(),null!==this.wv&&this.wv.el().tn(this),this.Rc.sn()},t.prototype.Jc=function(){return f(this.wv)},t.prototype.xv=function(i){null!==this.wv&&this.wv.el().tn(this),this.wv=i,null!==this.wv&&this.wv.el().Xi(t.prototype.bv.bind(this),this,!0),this.kv()},t.prototype.Tc=function(){return this.Mv},t.prototype.jc=function(){return this.yv},t.prototype.kv=function(){if(null!==this.wv&&(this.Nv(),0!==this.hi().O().length)){if(null!==this.ev){var t=this.wv.$o();this.ev.li(f(t))}if(null!==this.uv){var i=this.wv.Xo();this.uv.li(f(i))}}},t.prototype.Uo=function(){return null!==this.wv?this.wv.Uo():0},t.prototype.Ro=function(t){this.wv&&this.wv.Ro(t)},t.prototype.Ef=function(t){if(this.wv){var i=t.uc,n=t.ac;hn||this.Sv(i,n)}},t.prototype.Yf=function(t){if(this.cv=!1,this._v=null!==this.vv,this.wv){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)f(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.hi();if(!this.wv.Ci().Qt()&&!n.j().Qt()){if(null!==this.vv){var h=n.Fl();this.dv={x:h.Mt(),y:h.bt()},this.vv={x:t.uc,y:t.ac}}hn||this.Sv(t.uc,t.ac)}}},t.prototype.Lf=function(t){if(this.wv){var i=t.uc,n=t.ac;if(this.Cv()&&this.Dv(),!hn){this.Sv(i,n);var h=this.Iu(i,n);this.hi().Ll(h&&{Al:h.Al,Tv:h.Tv}),null!==h&&void 0!==h.vc.Bv&&h.vc.Bv(i,n)}}},t.prototype.jf=function(t){if(null!==this.wv){var i=t.uc,n=t.ac,h=this.Iu(i,n);if(null!==h&&void 0!==h.vc.Ev&&h.vc.Ev(i,n),this.lv.hn()){var s=this.hi().Fl().R();this.lv.nn(s,{x:i,y:n})}this.Lv()}},t.prototype.Ff=function(t){if(null!==this.wv){var i=this.hi(),n=t.uc,h=t.ac;if(null!==this.vv){this._v=!1;var s=f(this.dv),r=s.x+(n-this.vv.x),e=s.y+(h-this.vv.y);this.Sv(r,e)}else this.Cv()||this.Sv(n,h);if(!i.j().Qt()){var u=this.Mv.I().handleScroll;if(u.pressedMouseMove&&"touch"!==t.ge||(u.horzTouchDrag||u.vertTouchDrag)&&"mouse"!==t.ge){var a=this.wv.Ci();null!==this.av||this.Av()||(this.av={x:t.hc,y:t.sc}),null===this.av||this.av.x===t.hc&&this.av.y===t.sc||this.ov||(a.Qt()||i.Qo(this.wv,a,t.ac),i.Hl(t.uc),this.ov=!0),this.ov&&(a.Qt()||i.tl(this.wv,a,t.ac),i.Yl(t.uc))}}}},t.prototype.Uf=function(t){if(null!==this.wv){this.cv=!1;var i=this.hi();if(this.ov){var n=this.wv.Ci();i.il(this.wv,n),i.Kl(),this.av=null,this.ov=!1}}},t.prototype.nc=function(t){if(this.cv=!0,null===this.vv&&cn){var i={x:t.uc,y:t.ac};this.Vv(i,i)}},t.prototype.ic=function(t){null!==this.wv&&(this.wv.ct().Ll(null),sn||this.Dv())},t.prototype.zv=function(){return this.lv},t.prototype.Xf=function(){this.fv=1},t.prototype.Zf=function(t,i){if(this.Mv.I().handleScale.pinch){var n=5*(i-this.fv);this.fv=i,this.hi().jl(t.g,n)}},t.prototype.Iu=function(t,i){var n=this.wv;if(null===n)return null;for(var h=0,s=n.Ah();h<s.length;h++){var r=s[h],e=this.Ov(r.ci(n),t,i);if(null!==e)return{Al:r,vc:e.vc,Tv:e.Tv}}return null},t.prototype.Pv=function(t,i){f("left"===i?this.ev:this.uv).Xc(new Zi(t,this.gc.st))},t.prototype.Fv=function(){return this.gc},t.prototype.Xc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.gc.un(t)||(this.gc=t,this.Ac.resizeCanvas({width:t.ht,height:t.st}),this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.mv.style.width=t.ht+"px",this.mv.style.height=t.st+"px")},t.prototype.Iv=function(){var t=f(this.wv);t.Ko(t.$o()),t.Ko(t.Xo());for(var i=0,n=t.Lh();i<n.length;i++){var h=n[i];if(t.Lu(h)){var s=h.Z();null!==s&&t.Ko(s),h.Wi()}}},t.prototype.sv=function(){return this.Ac.canvas},t.prototype.Gc=function(t){if(0!==t&&null!==this.wv){if(t>1&&this.Iv(),null!==this.ev&&this.ev.Gc(t),null!==this.uv&&this.uv.Gc(t),1!==t){var i=Gi(this.Ac.canvas);i.save(),this.tv(i,this.Wv(),this.Ac.pixelRatio),this.wv&&(this.Uv(i,this.Ac.pixelRatio),this.Rv(i,this.Ac.pixelRatio),this.jv(i,this.Ac.pixelRatio)),i.restore()}var n=Gi(this.Vc.canvas);n.clearRect(0,0,Math.ceil(this.gc.ht*this.Vc.pixelRatio),Math.ceil(this.gc.st*this.Vc.pixelRatio)),this.qv(n,this.Vc.pixelRatio)}},t.prototype.Hv=function(){return this.ev},t.prototype.Yv=function(){return this.uv},t.prototype.Wv=function(){return this.Mv.I().layout.backgroundColor},t.prototype.bv=function(){null!==this.wv&&this.wv.el().tn(this),this.wv=null},t.prototype.tv=function(t,i,n){var h=this;O(t,n,(function(){P(t,0,0,h.gc.ht,h.gc.st,i)}))},t.prototype.Uv=function(t,i){var n=f(this.wv),h=n.ul().Do().W(n.wt(),n.dt());null!==h&&(t.save(),h.h(t,i,!1),t.restore())},t.prototype.Rv=function(t,i){var n=this.hi().Pl();this.Kv(n,t,i),this.$v(n,t,i)},t.prototype.qv=function(t,i){this.$v(this.hi().Fl(),t,i)},t.prototype.jv=function(t,i){for(var n=f(this.wv).Ah(),h=0,s=n;h<s.length;h++){var r=s[h];this.Kv(r,t,i)}for(var e=0,u=n;e<u.length;e++){r=u[e];this.$v(r,t,i)}},t.prototype.$v=function(t,i,n){for(var h=f(this.wv),s=t.ci(h),r=h.wt(),e=h.dt(),u=h.ct().El(),a=null!==u&&u.Al===t,o=null!==u&&a&&void 0!==u.Tv?u.Tv.Wu:void 0,l=0,c=s;l<c.length;l++){var v=c[l].W(r,e);null!==v&&(i.save(),v.h(i,n,a,o),i.restore())}},t.prototype.Kv=function(t,i,n){for(var h=f(this.wv),s=t.ci(h),r=h.wt(),e=h.dt(),u=h.ct().El(),a=null!==u&&u.Al===t,o=null!==u&&a&&void 0!==u.Tv?u.Tv.Wu:void 0,l=0,c=s;l<c.length;l++){var v=c[l].W(r,e);null!==v&&void 0!==v.o&&(i.save(),v.o(i,n,a,o),i.restore())}},t.prototype.Ov=function(t,i,n){for(var h=0,s=t;h<s.length;h++){var r=s[h],e=r.W(this.gc.st,this.gc.ht);if(null!==e&&e.Iu){var u=e.Iu(i,n);if(null!==u)return{vc:r,Tv:u}}}return null},t.prototype.Nv=function(){if(null!==this.wv){var t=this.Mv;t.I().leftPriceScale.visible||null===this.ev||(this.gv.removeChild(this.ev.jc()),this.ev.sn(),this.ev=null),t.I().rightPriceScale.visible||null===this.uv||(this.pv.removeChild(this.uv.jc()),this.uv.sn(),this.uv=null);var i=t.ct().tf();t.I().leftPriceScale.visible&&null===this.ev&&(this.ev=new fn(this,t.I().layout,i,"left"),this.gv.appendChild(this.ev.jc())),t.I().rightPriceScale.visible&&null===this.uv&&(this.uv=new fn(this,t.I().layout,i,"right"),this.pv.appendChild(this.uv.jc()))}},t.prototype.Cv=function(){return cn&&null===this.vv},t.prototype.Av=function(){return cn&&this.cv||null!==this.vv},t.prototype.Xv=function(t){return Math.max(0,Math.min(t,this.gc.ht-1))},t.prototype.Zv=function(t){return Math.max(0,Math.min(t,this.gc.st-1))},t.prototype.Sv=function(t,i){this.hi().Zl(this.Xv(t),this.Zv(i),f(this.wv))},t.prototype.Dv=function(){this.hi().Gl()},t.prototype.Lv=function(){this._v&&(this.vv=null,this.Dv())},t.prototype.Vv=function(t,i){this.vv=t,this._v=!1,this.Sv(i.x,i.y);var n=this.hi().Fl();this.dv={x:n.Mt(),y:n.bt()}},t.prototype.hi=function(){return this.Mv.ct()},t}(),_n=function(){function t(t,i,n,h){var s=this;this.B=!0,this.gc=new Zi(0,0),this.Cc=function(){return s.Gc(3)},this.Ec="left"===t,this.xl=n.tf,this.xi=i,this.Jv=h,this.Lc=document.createElement("div"),this.Lc.style.width="25px",this.Lc.style.height="100%",this.Lc.style.overflow="hidden",this.Ac=tn(this.Lc,new Zi(16,16)),this.Ac.subscribeCanvasConfigured(this.Cc)}return t.prototype.sn=function(){this.Ac.unsubscribeCanvasConfigured(this.Cc),this.Ac.destroy()},t.prototype.jc=function(){return this.Lc},t.prototype.Fv=function(){return this.gc},t.prototype.Xc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.gc.un(t)||(this.gc=t,this.Ac.resizeCanvas({width:t.ht,height:t.st}),this.Lc.style.width=t.ht+"px",this.Lc.style.minWidth=t.ht+"px",this.Lc.style.height=t.st+"px",this.B=!0)},t.prototype.Gc=function(t){if((!(t<3)||this.B)&&0!==this.gc.ht&&0!==this.gc.st){this.B=!1;var i=Gi(this.Ac.canvas);this.tv(i,this.Ac.pixelRatio),this.lu(i,this.Ac.pixelRatio)}},t.prototype.sv=function(){return this.Ac.canvas},t.prototype.lu=function(t,i){if(this.Jv()){var n=this.gc.ht;t.save(),t.fillStyle=this.xi.timeScale.borderColor;var h=Math.floor(this.xl.I().Dt*i),s=this.Ec?Math.round(n*i)-h:0;t.fillRect(s,0,h,h),t.restore()}},t.prototype.tv=function(t,i){var n=this;O(t,i,(function(){P(t,0,0,n.gc.ht,n.gc.st,n.xi.layout.backgroundColor)}))},t}();function dn(t,i){return t.Ps>i.Ps?t:i}var wn=function(){function t(t){var i=this;this.Gv=null,this.Qv=null,this.ee=null,this.t_=!1,this.gc=new Zi(0,0),this.Cc=function(){return i.Mv.ct().zr()},this.Bc=function(){return i.Mv.ct().zr()},this.Mv=t,this.xi=t.I().layout,this.i_=document.createElement("tr"),this.n_=document.createElement("td"),this.n_.style.padding="0",this.h_=document.createElement("td"),this.h_.style.padding="0",this.Lc=document.createElement("td"),this.Lc.style.height="25px",this.Lc.style.padding="0",this.s_=document.createElement("div"),this.s_.style.width="100%",this.s_.style.height="100%",this.s_.style.position="relative",this.s_.style.overflow="hidden",this.Lc.appendChild(this.s_),this.Ac=tn(this.s_,new Zi(16,16)),this.Ac.subscribeCanvasConfigured(this.Cc);var n=this.Ac.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Vc=tn(this.s_,new Zi(16,16)),this.Vc.subscribeCanvasConfigured(this.Bc);var h=this.Vc.canvas;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.i_.appendChild(this.n_),this.i_.appendChild(this.Lc),this.i_.appendChild(this.h_),this.r_(),this.Mv.ct().Wo().Xi(this.r_.bind(this),this),this.Rc=new rn(this.Vc.canvas,this,{Of:!0,Pf:!1})}return t.prototype.sn=function(){this.Rc.sn(),null!==this.Gv&&this.Gv.sn(),null!==this.Qv&&this.Qv.sn(),this.Vc.unsubscribeCanvasConfigured(this.Bc),this.Vc.destroy(),this.Ac.unsubscribeCanvasConfigured(this.Cc),this.Ac.destroy()},t.prototype.jc=function(){return this.i_},t.prototype.e_=function(){return this.Gv},t.prototype.u_=function(){return this.Qv},t.prototype.Yf=function(t){if(!this.t_){this.t_=!0;var i=this.Mv.ct();!i.j().Qt()&&this.Mv.I().handleScale.axisPressedMouseMove.time&&i.Rl(t.uc)}},t.prototype.Kf=function(){var t=this.Mv.ct();!t.j().Qt()&&this.t_&&(this.t_=!1,this.Mv.I().handleScale.axisPressedMouseMove.time&&t.Xl())},t.prototype.Ff=function(t){var i=this.Mv.ct();!i.j().Qt()&&this.Mv.I().handleScale.axisPressedMouseMove.time&&i.$l(t.uc)},t.prototype.Uf=function(t){this.t_=!1;var i=this.Mv.ct();i.j().Qt()&&!this.Mv.I().handleScale.axisPressedMouseMove.time||i.Xl()},t.prototype.Rf=function(){this.Mv.I().handleScale.axisDoubleClickReset&&this.Mv.ct().ye()},t.prototype.Ef=function(t){this.Mv.ct().I().handleScale.axisPressedMouseMove.time&&this.rv(1)},t.prototype.ic=function(t){this.rv(0)},t.prototype.Fv=function(){return this.gc},t.prototype.a_=function(t,i,n){this.gc&&this.gc.un(t)||(this.gc=t,this.Ac.resizeCanvas({width:t.ht,height:t.st}),this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Lc.style.width=t.ht+"px",this.Lc.style.height=t.st+"px"),null!==this.Gv&&this.Gv.Xc(new Zi(i,t.st)),null!==this.Qv&&this.Qv.Xc(new Zi(n,t.st))},t.prototype.o_=function(){var t=this.l_();return Math.ceil(t.Dt+t.Ct+t.Ot+t.Tt+t.Bt)},t.prototype.V=function(){this.Mv.ct().j().En()},t.prototype.sv=function(){return this.Ac.canvas},t.prototype.Gc=function(t){if(0!==t){if(1!==t){var i=Gi(this.Ac.canvas);this.tv(i,this.Ac.pixelRatio),this.lu(i,this.Ac.pixelRatio),this.iv(i,this.Ac.pixelRatio),null!==this.Gv&&this.Gv.Gc(t),null!==this.Qv&&this.Qv.Gc(t)}var n=Gi(this.Vc.canvas),h=this.Vc.pixelRatio;n.clearRect(0,0,Math.ceil(this.gc.ht*h),Math.ceil(this.gc.st*h)),this.f_([this.Mv.ct().Fl()],n,h)}},t.prototype.tv=function(t,i){var n=this;O(t,i,(function(){P(t,0,0,n.gc.ht,n.gc.st,n.Wv())}))},t.prototype.lu=function(t,i){if(this.Mv.I().timeScale.borderVisible){t.save(),t.fillStyle=this.c_();var n=Math.max(1,Math.floor(this.l_().Dt*i));t.fillRect(0,0,Math.ceil(this.gc.ht*i),n),t.restore()}},t.prototype.iv=function(t,i){var n=this,h=this.Mv.ct().j().En();if(h&&0!==h.length){var s=h.reduce(dn,h[0]).Ps;s>30&&s<40&&(s=30),t.save(),t.strokeStyle=this.c_();var r=this.l_(),e=r.Dt+r.Ct+r.Tt+r.Ot-r.zt;t.textAlign="center",t.fillStyle=this.c_();var u=Math.floor(this.l_().Dt*i),a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(this.Mv.ct().j().I().borderVisible){t.beginPath();for(var l=Math.round(r.Ct*i),f=h.length;f--;){var c=Math.round(h[f].Cn*i);t.rect(c-o,u,a,l)}t.fill()}t.fillStyle=this.le(),O(t,i,(function(){t.font=n.v_();for(var i=0,r=h;i<r.length;i++){(o=r[i]).Ps<s&&t.fillText(o.Dn,o.Cn,e)}t.font=n.__();for(var u=0,a=h;u<a.length;u++){var o;(o=a[u]).Ps>=s&&t.fillText(o.Dn,o.Cn,e)}}))}},t.prototype.f_=function(t,i,n){for(var h=this.l_(),s=0,r=t;s<r.length;s++)for(var e=0,u=r[s].vi();e<u.length;e++){var a=u[e];i.save(),a.W().h(i,h,n),i.restore()}},t.prototype.Wv=function(){return this.xi.backgroundColor},t.prototype.c_=function(){return this.Mv.I().timeScale.borderColor},t.prototype.le=function(){return this.xi.textColor},t.prototype.ae=function(){return this.xi.fontSize},t.prototype.v_=function(){return Ot(this.ae(),this.xi.fontFamily)},t.prototype.__=function(){return Ot(this.ae(),this.xi.fontFamily,"bold")},t.prototype.l_=function(){null===this.ee&&(this.ee={Dt:1,zt:NaN,Tt:NaN,Bt:NaN,ni:NaN,Ct:3,Ot:NaN,xt:"",ii:new oi});var t=this.ee,i=this.v_();if(t.xt!==i){var n=this.ae();t.Ot=n,t.xt=i,t.Tt=Math.ceil(n/2.5),t.Bt=t.Tt,t.ni=Math.ceil(n/2),t.zt=Math.round(this.ae()/5),t.ii.xu()}return this.ee},t.prototype.rv=function(t){this.Lc.style.cursor=1===t?"ew-resize":"default"},t.prototype.r_=function(){var t=this.Mv.ct(),i=t.I();i.leftPriceScale.visible||null===this.Gv||(this.n_.removeChild(this.Gv.jc()),this.Gv.sn(),this.Gv=null),i.rightPriceScale.visible||null===this.Qv||(this.h_.removeChild(this.Qv.jc()),this.Qv.sn(),this.Qv=null);var n={tf:this.Mv.ct().tf()};if(i.leftPriceScale.visible&&null===this.Gv){var h=function(){return i.leftPriceScale.borderVisible&&t.j().I().borderVisible};this.Gv=new _n("left",this.Mv.I(),n,h),this.n_.appendChild(this.Gv.jc())}if(i.rightPriceScale.visible&&null===this.Qv){h=function(){return i.rightPriceScale.borderVisible&&t.j().I().borderVisible};this.Qv=new _n("right",this.Mv.I(),n,h),this.h_.appendChild(this.Qv.jc())}},t}(),Mn=function(){function t(t,i){var n;this.d_=[],this.w_=0,this.Ln=0,this.Hs=0,this.M_=0,this.b_=0,this.m_=null,this.g_=!1,this.lv=new J,this.yl=new J,this.xi=i,this.i_=document.createElement("div"),this.i_.classList.add("tv-lightweight-charts"),this.i_.style.overflow="hidden",this.i_.style.width="100%",this.i_.style.height="100%",(n=this.i_).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.p_=document.createElement("table"),this.p_.setAttribute("cellspacing","0"),this.i_.appendChild(this.p_),this.y_=this.k_.bind(this),this.i_.addEventListener("wheel",this.y_,{passive:!1}),this.hi=new Xi(this.kl.bind(this),this.xi),this.ct().Il().Xi(this.x_.bind(this),this),this.N_=new wn(this),this.p_.appendChild(this.N_.jc());var h=this.xi.width,s=this.xi.height;if(0===h||0===s){var r=t.getBoundingClientRect();0===h&&(h=Math.floor(r.width),h-=h%2),0===s&&(s=Math.floor(r.height),s-=s%2)}this.S_(h,s),this.C_(),t.appendChild(this.i_),this.D_(),this.hi.j().$r().Xi(this.hi.Dl.bind(this.hi),this),this.hi.Wo().Xi(this.hi.Dl.bind(this.hi),this)}return t.prototype.ct=function(){return this.hi},t.prototype.I=function(){return this.xi},t.prototype.T_=function(){return this.d_},t.prototype.sn=function(){this.i_.removeEventListener("wheel",this.y_),0!==this.w_&&window.cancelAnimationFrame(this.w_),this.hi.Il().tn(this),this.hi.j().$r().tn(this),this.hi.Wo().tn(this),this.hi.sn();for(var t=0,i=this.d_;t<i.length;t++){var n=i[t];this.p_.removeChild(n.jc()),n.zv().tn(this),n.sn()}this.d_=[],f(this.N_).sn(),null!==this.i_.parentElement&&this.i_.parentElement.removeChild(this.i_),this.yl.sn(),this.lv.sn()},t.prototype.S_=function(t,i,n){if(void 0===n&&(n=!1),this.Ln!==i||this.Hs!==t){this.Ln=i,this.Hs=t;var h=i+"px",s=t+"px";f(this.i_).style.height=h,f(this.i_).style.width=s,this.p_.style.height=h,this.p_.style.width=s,n?this.B_(new It(3)):this.hi.Dl()}},t.prototype.Gc=function(t){void 0===t&&(t=new It(3));for(var i=0;i<this.d_.length;i++)this.d_[i].Gc(t.be(i).we);this.N_.Gc(t.Me())},t.prototype.nh=function(t){this.hi.nh(t),this.D_();var i=t.width||this.Hs,n=t.height||this.Ln;this.S_(i,n)},t.prototype.zv=function(){return this.lv},t.prototype.Il=function(){return this.yl},t.prototype.E_=function(){var t=this;null!==this.m_&&(this.B_(this.m_),this.m_=null);var i=this.d_[0],n=Qi(document,new Zi(this.Hs,this.Ln)),h=Gi(n),s=Ji(n);return O(h,s,(function(){var n=0,s=0,r=function(i){for(var r=0;r<t.d_.length;r++){var e=t.d_[r],u=e.Fv().st,a=f("left"===i?e.Hv():e.Yv()),o=a.sv();h.drawImage(o,n,s,a.Zc(),u),s+=u}};t.L_()&&(r("left"),n=f(i.Hv()).Zc()),s=0;for(var e=0;e<t.d_.length;e++){var u=t.d_[e],a=u.Fv(),o=u.sv();h.drawImage(o,n,s,a.ht,a.st),s+=a.st}n+=i.Fv().ht,t.A_()&&(s=0,r("right"));var l=function(i){var r=f("left"===i?t.N_.e_():t.N_.u_()),e=r.Fv(),u=r.sv();h.drawImage(u,n,s,e.ht,e.st)};if(t.xi.timeScale.visible){n=0,t.L_()&&(l("left"),n=f(i.Hv()).Zc());var c=t.N_.Fv();o=t.N_.sv();h.drawImage(o,n,s,c.ht,c.st),t.A_()&&(n=i.Fv().ht,l("right"),h.restore())}})),n},t.prototype.V_=function(t){return"none"===t?0:("left"!==t||this.L_())&&("right"!==t||this.A_())?0===this.d_.length?0:f("left"===t?this.d_[0].Hv():this.d_[0].Yv()).Zc():0},t.prototype.z_=function(){for(var t=0,i=0,n=0,h=0,s=this.d_;h<s.length;h++){var r=s[h];this.L_()&&(i=Math.max(i,f(r.Hv()).Kc())),this.A_()&&(n=Math.max(n,f(r.Yv()).Kc())),t+=r.Uo()}var e=this.Hs,u=this.Ln,a=Math.max(e-i-n,0),o=this.xi.timeScale.visible?this.N_.o_():0;o%2&&(o+=1);for(var l=0+o,c=u<l?0:u-l,v=c/t,_=0,d=0;d<this.d_.length;++d){(r=this.d_[d]).xv(this.hi.Ol()[d]);var w,M=0;M=d===this.d_.length-1?c-_:Math.round(r.Uo()*v),_+=w=Math.max(M,2),r.Xc(new Zi(a,w)),this.L_()&&r.Pv(i,"left"),this.A_()&&r.Pv(n,"right"),r.Jc()&&this.hi.Wl(r.Jc(),w)}this.N_.a_(new Zi(a,o),i,n),this.hi.Sr(a),this.M_!==i&&(this.M_=i),this.b_!==n&&(this.b_=n)},t.prototype.k_=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.xi.handleScroll.mouseWheel||0!==n&&this.xi.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.xi.handleScale.mouseWheel){var h=Math.sign(n)*Math.min(1,Math.abs(n)),s=t.clientX-this.i_.getBoundingClientRect().left;this.ct().jl(s,h)}0!==i&&this.xi.handleScroll.mouseWheel&&this.ct().ql(-80*i)}},t.prototype.B_=function(t){var i=t.Me();if(3===i&&this.O_(),3===i||2===i){for(var n=this.hi.Ol(),h=0;h<n.length;h++)t.be(h).lh&&n[h].sl();for(var s=t.ke(),r=0,e=s;r<e.length;r++){var u=e[r];this.xe(u)}s.length>0&&(this.hi.Vr(),this.hi.so(),this.hi.zr()),this.N_.V()}this.Gc(t)},t.prototype.xe=function(t){var i=this.hi.j();switch(t.ge){case 0:i.Zr();break;case 1:i.Jr(t.J);break;case 2:i.vr(t.J);break;case 3:i._r(t.J);break;case 4:i.Ir()}},t.prototype.kl=function(t){var i=this;null!==this.m_?this.m_.cn(t):this.m_=t,this.g_||(this.g_=!0,this.w_=window.requestAnimationFrame((function(){i.g_=!1,i.w_=0,null!==i.m_&&(i.B_(i.m_),i.m_=null)})))},t.prototype.O_=function(){this.C_()},t.prototype.C_=function(){for(var t=this.hi.Ol(),i=t.length,n=this.d_.length,h=i;h<n;h++){var s=l(this.d_.pop());this.p_.removeChild(s.jc()),s.zv().tn(this),s.sn()}for(h=n;h<i;h++){(s=new vn(this,t[h])).zv().Xi(this.P_.bind(this),this),this.d_.push(s),this.p_.insertBefore(s.jc(),this.N_.jc())}for(h=0;h<i;h++){var r=t[h];(s=this.d_[h]).Jc()!==r?s.xv(r):s.kv()}this.D_(),this.z_()},t.prototype.F_=function(t,i){var n,h=new Map;null!==t&&this.hi.O().forEach((function(i){var n=i.Qu(t);null!==n&&h.set(i,n)}));if(null!==t){var s=this.hi.j().si(t);null!==s&&(n=s)}var r=this.ct().El(),e=null!==r&&r.Al instanceof Wi?r.Al:void 0,u=null!==r&&void 0!==r.Tv?r.Tv.Ru:void 0;return{P:n,I_:i||void 0,W_:e,U_:h,R_:u}},t.prototype.P_=function(t,i){var n=this;this.lv.nn((function(){return n.F_(t,i)}))},t.prototype.x_=function(t,i){var n=this;this.yl.nn((function(){return n.F_(t,i)}))},t.prototype.D_=function(){var t=this.xi.timeScale.visible?"":"none";this.N_.jc().style.display=t},t.prototype.L_=function(){return this.xi.leftPriceScale.visible},t.prototype.A_=function(){return this.xi.rightPriceScale.visible},t}();function bn(t,i,n){var h=n.value,s={Os:i,P:t,J:[h,h,h,h]};return"color"in n&&void 0!==n.color&&(s.et=n.color),s}function mn(t,i,n){return{Os:i,P:t,J:[n.open,n.high,n.low,n.close]}}function gn(t){return void 0!==t.J}function pn(t){return function(i,n,h){return void 0===(s=h).open&&void 0===s.value?{P:i,Os:n}:t(i,n,h);var s}}var yn={Candlestick:pn(mn),Bar:pn(mn),Area:pn(bn),Histogram:pn(bn),Line:pn(bn)};function kn(t){return yn[t]}function xn(t){return 60*t*60*1e3}function Nn(t){return 60*t*1e3}var Sn,Cn=[{j_:1,Ps:20},{j_:(Sn=1,1e3*Sn),Ps:19},{j_:Nn(1),Ps:20},{j_:Nn(5),Ps:21},{j_:Nn(30),Ps:22},{j_:xn(1),Ps:30},{j_:xn(3),Ps:31},{j_:xn(6),Ps:32},{j_:xn(12),Ps:33}];function Dn(t,i){if(null!==i){var n=new Date(1e3*i),h=new Date(1e3*t);if(h.getUTCFullYear()!==n.getUTCFullYear())return 70;if(h.getUTCMonth()!==n.getUTCMonth())return 60;if(h.getUTCDate()!==n.getUTCDate())return 50;for(var s=Cn.length-1;s>=0;--s)if(Math.floor(n.getTime()/Cn[s].j_)!==Math.floor(h.getTime()/Cn[s].j_))return Cn[s].Ps}return 20}function Tn(t){if(!At(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Ss:Math.round(i.getTime()/1e3),Ns:t}}function Bn(t){if(!Vt(t))throw new Error("time must be of type isUTCTimestamp");return{Ss:t}}function En(t){return 0===t.length?null:At(t[0].time)?Tn:Bn}function Ln(t){return Vt(t)?Bn(t):At(t)?Tn(t):Tn(An(t))}function An(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function Vn(t){w(t.time)&&(t.time=An(t.time))}function zn(t){return{Os:0,q_:new Map,Ph:t}}var On=function(){function t(){this.H_=new Map,this.Y_=new Map,this.K_=new Map,this.X_=[]}return t.prototype.sn=function(){this.H_.clear(),this.Y_.clear(),this.K_.clear(),this.X_=[]},t.prototype.Z_=function(t,i){var n=this;this.K_.has(t)&&this.H_.forEach((function(i){return i.q_.delete(t)}));var h=[];if(0!==i.length){!function(t){t.forEach(Vn)}(i);var s=f(En(i)),r=kn(t._a());h=i.map((function(i){var h=s(i.time),e=n.H_.get(h.Ss);void 0===e&&(e=zn(h),n.H_.set(h.Ss,e));var u=r(h,e.Os,i);return e.q_.set(t,u),u}))}return this.J_(),this.G_(t,h),this.Q_(t)},t.prototype.hf=function(t){return this.Z_(t,[])},t.prototype.td=function(t,i){Vn(i);var n=f(En([i]))(i.time),h=this.K_.get(t);if(void 0!==h&&n.Ss<h.Ss)throw new Error("Cannot update oldest data, last time="+h.Ss+", new time="+n.Ss);var s=this.H_.get(n.Ss),r=void 0===s;void 0===s&&(s=zn(n),this.H_.set(n.Ss,s));var e=kn(t._a())(n,s.Os,i);s.q_.set(t,e);var u=this.nd(t,e);if(!r){var a=new Map;return null!==u&&a.set(t,u),{hd:a,j:{Br:this.sd()}}}return this.Q_(t)},t.prototype.nd=function(t,i){var n=this.Y_.get(t);void 0===n&&(n=[],this.Y_.set(t,n));var h=0!==n.length?n[n.length-1]:null,s=null;return null===h||i.P.Ss>h.P.Ss?gn(i)&&(n.push(i),s={Dl:!1,rd:[i]}):gn(i)?(n[n.length-1]=i,s={Dl:!1,rd:[i]}):(n.splice(-1,1),s={Dl:!0,rd:n}),this.K_.set(t,i.P),s},t.prototype.G_=function(t,i){0!==i.length?(this.Y_.set(t,i.filter(gn)),this.K_.set(t,i[i.length-1].P)):(this.Y_.delete(t),this.K_.delete(t))},t.prototype.J_=function(){var t=new Map;this.H_.forEach((function(i,n){i.q_.size>0&&t.set(n,i)})),this.H_=t},t.prototype.ed=function(t){for(var i=-1,n=0;n<this.X_.length&&n<t.length;++n){var h=this.X_[n],s=t[n];if(h.P.Ss!==s.P.Ss){i=n;break}s.zs=h.zs}if(-1===i&&this.X_.length!==t.length&&(i=Math.min(this.X_.length,t.length)),-1===i)return-1;var r=function(i){var n=l(e.H_.get(t[i].P.Ss));n.Os=i,n.q_.forEach((function(t){t.Os=i}))},e=this;for(n=i;n<t.length;++n)r(n);return function(t,i){void 0===i&&(i=0);for(var n=0===i||0===t.length?null:t[i-1].P.Ss,h=0,s=i;s<t.length;++s){var r=t[s];r.zs=Dn(r.P.Ss,n),h+=r.P.Ss-(n||r.P.Ss),n=r.P.Ss}if(0===i&&t.length>1){var e=Math.ceil(h/(t.length-1)),u=t[0].P.Ss-e;t[0].zs=Dn(t[0].P.Ss,u)}}(t,i),this.X_=t,i},t.prototype.sd=function(){if(0===this.Y_.size)return null;var t=0;return this.Y_.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Os))})),t},t.prototype.Q_=function(t){var i=Array.from(this.H_.values()).map((function(t){return{zs:0,P:t.Ph}}));i.sort((function(t,i){return t.P.Ss-i.P.Ss}));var n=this.ed(i),h={hd:new Map,j:{Br:this.sd()}};if(-1!==n)this.Y_.forEach((function(t,i){h.hd.set(i,{rd:t,Dl:!0})})),this.Y_.has(t)||h.hd.set(t,{rd:[],Dl:!0}),h.j.ud=this.X_;else{var s=this.Y_.get(t);h.hd.set(t,{rd:s||[],Dl:!0})}return h},t}();var Pn={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0,title:""},Fn=function(){function t(t){this.oa=t}return t.prototype.applyOptions=function(t){this.oa.nh(t)},t.prototype.options=function(){return this.oa.I()},t.prototype.ad=function(){return this.oa},t}();function In(t){var i=t.overlay,n=function(t,i){var n={};for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&i.indexOf(h)<0&&(n[h]=t[h]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(h=Object.getOwnPropertySymbols(t);s<h.length;s++)i.indexOf(h[s])<0&&Object.prototype.propertyIsEnumerable.call(t,h[s])&&(n[h[s]]=t[h[s]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var Wn=function(){function t(t,i,n){this.Pe=t,this.od=i,this.ld=n}return t.prototype.priceFormatter=function(){return this.Pe.Hh()},t.prototype.hd=function(){return this.Pe},t.prototype.priceToCoordinate=function(t){var i=this.Pe.Y();return null===i?null:this.Pe.Z().X(t,i.J)},t.prototype.coordinateToPrice=function(t){var i=this.Pe.Y();return null===i?null:this.Pe.Z().Di(t,i.J)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new Et(new Ct(t.from,t.to)).Rs(),n=this.Pe.qi();if(n.Qt())return null;var h=n.Ba(i.ns(),1),s=n.Ba(i.hs(),-1),r=f(n.Ca()),e=f(n.ji());if(null!==h&&null!==s&&h.Os>s.Os)return{barsBefore:t.from-r,barsAfter:e-t.to};var u={barsBefore:null===h||h.Os===r?t.from-r:h.Os-r,barsAfter:null===s||s.Os===e?e-t.to:e-s.Os};return null!==h&&null!==s&&(u.from=h.P.Ns||h.P.Ss,u.to=s.P.Ns||s.P.Ss),u},t.prototype.setData=function(t){this.Pe._a(),this.od.fd(this.Pe,t)},t.prototype.update=function(t){this.Pe._a(),this.od.eo(this.Pe,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return u(u({},t),{time:Ln(t.time)})}));this.Pe.oo(i)},t.prototype.applyOptions=function(t){var i=In(t);this.Pe.nh(i)},t.prototype.options=function(){return b(this.Pe.I())},t.prototype.priceScale=function(){return this.ld.priceScale(this.Pe.Z().ih())},t.prototype.createPriceLine=function(t){var i=v(b(Pn),t),n=this.Pe.lo(i);return new Fn(n)},t.prototype.removePriceLine=function(t){this.Pe.fo(t.ad())},t.prototype.seriesType=function(){return this.Pe._a()},t}(),Un=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.applyOptions=function(i){mt(i),t.prototype.applyOptions.call(this,i)},i}(Wn),Rn={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2},width:0},jn={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:zt,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},qn={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:zt},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:u({},Rn),leftPriceScale:u(u({},Rn),{visible:!1}),rightPriceScale:u(u({},Rn),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:jn,localization:{locale:nn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},Hn={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Yn={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Kn={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},$n={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},Xn={color:"#26a69a",base:0},Zn={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Jn=function(){function t(t,i){this.vd=t,this._d=i}return t.prototype.applyOptions=function(t){this.vd.ct().Vl(this._d,t)},t.prototype.options=function(){return this.Jt().I()},t.prototype.width=function(){return Ft(this._d)?this.vd.V_("left"===this._d?"left":"right"):0},t.prototype.Jt=function(){return f(this.vd.ct().zl(this._d)).Z},t}(),Gn=function(){function t(t){this.dd=new J,this.Qs=new J,this.hi=t,this.Lo().Yr().Xi(this.wd.bind(this)),this.Lo().Kr().Xi(this.Md.bind(this))}return t.prototype.sn=function(){this.Lo().Yr().tn(this),this.Lo().Kr().tn(this),this.dd.sn()},t.prototype.scrollPosition=function(){return this.Lo().Pr()},t.prototype.scrollToPosition=function(t,i){i?this.Lo().Hr(t,1e3):this.hi._r(t)},t.prototype.scrollToRealTime=function(){this.Lo().qr()},t.prototype.getVisibleRange=function(){var t,i,n=this.Lo().mr();return null===n?null:{from:null!==(t=n.from.Ns)&&void 0!==t?t:n.from.Ss,to:null!==(i=n.to.Ns)&&void 0!==i?i:n.to.Ss}},t.prototype.setVisibleRange=function(t){var i={from:Ln(t.from),to:Ln(t.to)},n=this.Lo().kr(i);this.hi.sf(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.Lo().br();return null===t?null:{from:t.ns(),to:t.hs()}},t.prototype.setVisibleLogicalRange=function(t){o(t.from<=t.to,"The from index cannot be after the to index."),this.hi.sf(t)},t.prototype.resetTimeScale=function(){this.hi.ye()},t.prototype.fitContent=function(){this.hi.Zr()},t.prototype.logicalToCoordinate=function(t){var i=this.hi.j();return i.Qt()?null:i.G(t)},t.prototype.coordinateToLogical=function(t){var i=this.hi.j();return i.Qt()?null:i.Lr(t)},t.prototype.timeToCoordinate=function(t){var i=Ln(t),n=this.hi.j(),h=n.dr(i,!1);return null===h?null:n.G(h)},t.prototype.coordinateToTime=function(t){var i,n=this.hi.j(),h=n.Lr(t),s=n.si(h);return null===s?null:null!==(i=s.Ns)&&void 0!==i?i:s.Ss},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.dd.Xi(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.dd.Qi(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.Qs.Xi(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.Qs.Qi(t)},t.prototype.applyOptions=function(t){this.Lo().nh(t)},t.prototype.options=function(){return b(this.Lo().I())},t.prototype.Lo=function(){return this.hi.j()},t.prototype.wd=function(){this.dd.hn()&&this.dd.nn(this.getVisibleRange())},t.prototype.Md=function(){this.Qs.hn()&&this.Qs.nn(this.getVisibleLogicalRange())},t}();function Qn(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function th(t){return function(t){if(M(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&M(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var h=t.handleScroll;M(h)&&(t.handleScroll={horzTouchDrag:h,vertTouchDrag:h,mouseWheel:h,pressedMouseMove:h})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=v(t.leftPriceScale,t.priceScale),t.rightPriceScale=v(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),t}var ih=function(){function t(t,i){var n=this;this.bd=new On,this.md=new Map,this.gd=new Map,this.pd=new J,this.yd=new J;var h=void 0===i?b(qn):v(b(qn),th(i));this.vd=new Mn(t,h),this.vd.zv().Xi((function(t){n.pd.hn()&&n.pd.nn(n.kd(t()))}),this),this.vd.Il().Xi((function(t){n.yd.hn()&&n.yd.nn(n.kd(t()))}),this);var s=this.vd.ct();this.xd=new Gn(s)}return t.prototype.remove=function(){this.vd.zv().tn(this),this.vd.Il().tn(this),this.xd.sn(),this.vd.sn(),this.md.clear(),this.gd.clear(),this.pd.sn(),this.yd.sn(),this.bd.sn()},t.prototype.resize=function(t,i,n){this.vd.S_(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Qn((t=In(t)).priceFormat);var i=v(b(Zn),$n,t),n=this.vd.ct().if("Area",i),h=new Wn(n,this,this);return this.md.set(h,n),this.gd.set(n,h),h},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Qn((t=In(t)).priceFormat);var i=v(b(Zn),Yn,t),n=this.vd.ct().if("Bar",i),h=new Wn(n,this,this);return this.md.set(h,n),this.gd.set(n,h),h},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),mt(t=In(t)),Qn(t.priceFormat);var i=v(b(Zn),Hn,t),n=this.vd.ct().if("Candlestick",i),h=new Un(n,this,this);return this.md.set(h,n),this.gd.set(n,h),h},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Qn((t=In(t)).priceFormat);var i=v(b(Zn),Xn,t),n=this.vd.ct().if("Histogram",i),h=new Wn(n,this,this);return this.md.set(h,n),this.gd.set(n,h),h},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Qn((t=In(t)).priceFormat);var i=v(b(Zn),Kn,t),n=this.vd.ct().if("Line",i),h=new Wn(n,this,this);return this.md.set(h,n),this.gd.set(n,h),h},t.prototype.removeSeries=function(t){var i=l(this.md.get(t)),n=this.bd.hf(i);this.vd.ct().hf(i),this.Nd(n),this.md.delete(t),this.gd.delete(i)},t.prototype.fd=function(t,i){this.Nd(this.bd.Z_(t,i))},t.prototype.eo=function(t,i){this.Nd(this.bd.td(t,i))},t.prototype.subscribeClick=function(t){this.pd.Xi(t)},t.prototype.unsubscribeClick=function(t){this.pd.Qi(t)},t.prototype.moveCrosshair=function(t){if(t){var i=this.vd.T_(),n={uc:t.x,ac:t.y};i[0].Lf(n)}},t.prototype.subscribeCrosshairMove=function(t){this.yd.Xi(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.yd.Qi(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this.vd.ct().rf()),new Jn(this.vd,t)},t.prototype.timeScale=function(){return this.xd},t.prototype.applyOptions=function(t){this.vd.nh(th(t))},t.prototype.options=function(){return this.vd.I()},t.prototype.takeScreenshot=function(){return this.vd.E_()},t.prototype.Nd=function(t){var i=this.vd.ct();i.Ql(t.j.Br,t.j.ud),t.hd.forEach((function(t,i){return i.eo(t.rd,t.Dl)})),i.Vr()},t.prototype.Sd=function(t){return l(this.gd.get(t))},t.prototype.kd=function(t){var i=this,n=new Map;t.U_.forEach((function(t,h){n.set(i.Sd(h),t)}));var h=void 0===t.W_?void 0:this.Sd(t.W_);return{time:t.P&&(t.P.Ns||t.P.Ss),point:t.I_,hoveredSeries:h,hoveredMarkerId:t.R_,seriesPrices:n}},t}();function nh(t,i){var n;if(w(t)){var h=document.getElementById(t);o(null!==h,"Cannot find element in DOM with id="+t),n=h}else n=t;return new ih(n,i)}function hh(){return"3.4.0-dev+202106181406"}export{F as CrosshairMode,n as LineStyle,i as LineType,X as PriceFormatter,dt as PriceLineSource,ft as PriceScaleMode,Tt as TickMarkType,nh as createChart,At as isBusinessDay,Vt as isUTCTimestamp,hh as version};
